(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{226:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var a=n(18),l=n(0),o=n.n(l),r=function(){var t=function(){var e={};return document.cookie.split(";").forEach((function(t){var n=t.trim(),a=n.indexOf("="),l=n.slice(0,a),o=n.slice(a+1);e[l]=o})),e}().kndctr_5BFE274A5F6980A50A495C08_AdobeOrg_identity;return t?e.from(t,"base64").toString().substring(2,40):"None"},i=function(e){return function(){window.alloy("getIdentity",{namespaces:["ECID"]}).then((function(t){t.identity?(console.log("Sandbox: Get Identity command has completed.",t.identity.ECID),e(t.identity.ECID)):(console.log("Sandbox: Get Identity command has completed but no identity was provided in the result (possibly due to lack of consent)."),e("No Identity"))}))}},c=function(e){return function(){window.alloy("sendEvent",{}).then(i(e))}},s=function(e){return function(){window.alloy("setConsent",{consent:[{standard:"Adobe",version:"2.0",value:{collect:{val:"y"}}}]}).then(i(e))}},d=function(e){var t=e.target.href;e.preventDefault(),window.alloy("appendIdentityToUrl",{url:t}).then((function(e){var t=e.url;document.location=t}))},u=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)");return document.location.search.replace(t,"").replace(/^&/,"?")}("adobe_mc"),m="alloyio.com"===document.location.hostname?"alloyio2.com":"alloyio.com";function E(){var e=Object(l.useState)(""),t=Object(a.a)(e,2),n=t[0],E=t[1],p=Object(l.useState)(""),f=Object(a.a)(p,2),h=f[0],b=f[1],v=Object(l.useState)(""),A=Object(a.a)(v,2),g=A[0],y=A[1];Object(l.useEffect)((function(){var e=r();E(e),b(e)}),[]);var w=function(e){y(e),b(r())};return o.a.createElement("div",null,o.a.createElement("h1",null,"Identity"),o.a.createElement("section",null,"This page demonstrates recieving or sending identity within the URL. No calls to experience edge are made until you press one of the buttons below. The table shows the current and original identities. If you click on the link on the bottom, it will generate a link to another domain with the ID included in the URL."),o.a.createElement("section",null,o.a.createElement("button",{onClick:i(w)},"Get Identity"),o.a.createElement("button",{onClick:c(w)},"Send Event"),o.a.createElement("button",{onClick:s(w)},"Set Consent")),o.a.createElement("section",null,o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Original Identity Cookie"),o.a.createElement("td",null,o.a.createElement("pre",null,n))),o.a.createElement("tr",null,o.a.createElement("td",null,"Current Identity Cookie"),o.a.createElement("td",null,o.a.createElement("pre",null,h))),o.a.createElement("tr",null,o.a.createElement("td",null,"Identity from Web SDK"),o.a.createElement("td",null,o.a.createElement("pre",null,g)))))),o.a.createElement("section",null,o.a.createElement("a",{href:"/Identity".concat(u)},"Web SDK identity page"),o.a.createElement("br",null),o.a.createElement("a",{href:"/legacy.html".concat(u)},"Legacy identity page"),o.a.createElement("br",null),o.a.createElement("a",{href:"https://".concat(m,"/identity").concat(u),onClick:d},"Cross domain Web SDK identity page"),o.a.createElement("br",null),o.a.createElement("a",{href:"https://".concat(m,"/legacy.html").concat(u),onClick:d},"Cross domain legacy identity page"),o.a.createElement("br",null)))}}).call(this,n(461).Buffer)},227:function(e,t,n){e.exports=n(465)},458:function(e,t,n){},465:function(e,t,n){"use strict";n.r(t);n(228);var a=n(0),l=n.n(a),o=n(222),r=n.n(o),i=n(11),c=n(10),s=n(105);function d(){return l.a.createElement(s.a,null,l.a.createElement("meta",{"http-equiv":"Content-Security-Policy",content:"default-src 'self';\n              script-src 'self' 'nonce-".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_NONCE,"' cdn.jsdelivr.net assets.adobedtm.com cdn.tt.omtrdc.net;\n              style-src 'self' 'unsafe-inline';\n              img-src * data:;\n              connect-src 'self' *.alloyio.com *.adobedc.net *.demdex.net *.sc.omtrdc.net")}))}var u=function(e){return Array.isArray(e)&&e.length>0},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.instanceName,n=void 0===t?"alloy":t,l=e.viewName,o=e.data,r=void 0===o?{}:o,i=e.xdm,c=void 0===i?{}:i,s=e.decisionScopes,d=void 0===s?["sandbox-personalization-page"]:s,m=e.setPropositions;Object(a.useEffect)((function(){c.eventType="page-view",l&&(c.web={webPageDetails:{viewName:l}}),window[n]("sendEvent",{renderDecisions:!0,decisionScopes:d,xdm:c,data:r}).then((function(e){console.log(e);var t=e.propositions;m&&u(t)&&m(t)}))}),[n,l])},E=function(){window.alloy("getIdentity",{namespaces:["ECID"]}).then((function(e){e.identity?console.log("Sandbox: Get Identity command has completed.",e.identity.ECID):console.log("Sandbox: Get Identity command has completed but no identity was provided in the result (possibly due to lack of consent).")}))},p=function(){window.alloy("sendEvent",{datasetId:"5eb9aaa6a3b16e18a818e06f"})};function f(){return m(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Home"),l.a.createElement("section",null,l.a.createElement("h2",null,"Get Identity"),l.a.createElement("div",null,l.a.createElement("button",{onClick:E},"Get ECID"))),l.a.createElement("section",null,l.a.createElement("h2",null,"Collect data by overriding the Dataset configured in Config UI"),l.a.createElement("div",null,l.a.createElement("button",{onClick:p},"Send Event to Secondary Dataset"))))}n(458);var h,b=function(e){return new URLSearchParams(window.location.search).get(e)},v=function(e,t,n){var a=new URLSearchParams(window.location.search);return t!==n?a.set(e,t):a.delete(e),window.location.pathname+"?"+a},A=b("defaultConsent")||"in",g="false"!==b("idMigrationEnabled"),y="true"===b("includeVisitor"),w="true"===b("legacyOptIn"),C=function(e){var t=e.param,n=e.currentValue,a=e.defaultValue;return e.options.map((function(e,o){var r=e.value,i=e.label;return r===n?l.a.createElement("span",{key:o,className:"disabled"},i):l.a.createElement("a",{key:o,href:v(t,r,a)},i)}))},k=function(){return l.a.createElement("table",{className:"configuration"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"defaultConsent"),l.a.createElement("td",null,A),l.a.createElement("td",null,l.a.createElement(C,{param:"defaultConsent",currentValue:A,defaultValue:"in",options:[{value:"pending",label:"Set to pending"},{value:"in",label:"Set to in"},{value:"out",label:"Set to out"}]}))),l.a.createElement("tr",null,l.a.createElement("td",null,"idMigrationEnabled"),l.a.createElement("td",null,g.toString()),l.a.createElement("td",null,l.a.createElement(C,{param:"idMigrationEnabled",currentValue:g,defaultValue:"true",options:[{value:!0,label:"Enable"},{value:!1,label:"Disable"}]}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Include Visitor.js"),l.a.createElement("td",null,y.toString()),l.a.createElement("td",null,l.a.createElement(C,{param:"includeVisitor",currentValue:y,defaultValue:"false",options:[{value:!0,label:"Include"},{value:!1,label:"Remove"}]}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Enable Opt-in in Visitor"),l.a.createElement("td",null,w.toString()),l.a.createElement("td",null,l.a.createElement(C,{param:"legacyOptIn",currentValue:w,defaultValue:"false",options:[{value:!0,label:"Enable"},{value:!1,label:"Disable"}]})))))},I=n(18),z="kndctr_5BFE274A5F6980A50A495C08_AdobeOrg_",T=function(){h={},document.cookie.split(";").forEach((function(e){var t=e.trim(),n=t.indexOf("="),a=t.slice(0,n),l=t.slice(n+1);h[a]=l}))},O=function(){return h["".concat(z,"consent")]},S=function(){return void 0!==h["".concat(z,"consent_check")]},P=function(){return void 0!==h["".concat(z,"identity")]},B=function(){return void 0!==h["AMCV_5BFE274A5F6980A50A495C08%40AdobeOrg"]};T();var D=O(),j=S(),_=P(),N=B(),x={};window.__alloyMonitors=window.__alloyMonitors||[],window.__alloyMonitors.push(x);var M=function(){var e=Object(a.useState)(D),t=Object(I.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(j),i=Object(I.a)(r,2),c=i[0],s=i[1],d=Object(a.useState)(_),u=Object(I.a)(d,2),m=u[0],E=u[1],p=Object(a.useState)(N),f=Object(I.a)(p,2),h=f[0],b=f[1],v=function(){T(),o(O()),s(S()),E(P()),b(B())};Object(a.useEffect)((function(){x.onCommandResolved=v,x.onCommandRejected=v}));var A=function(e){return function(){document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"),v()}};return l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Consent Cookie"),l.a.createElement("td",null,n),l.a.createElement("td",null,l.a.createElement("button",{onClick:A("".concat(z,"consent")),disabled:void 0===n},"Delete"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Has Consent Check Cookie"),l.a.createElement("td",null,c?"true":"false"),l.a.createElement("td",null,l.a.createElement("button",{onClick:A("".concat(z,"consent_check")),disabled:!c},"Delete"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Has Identity Cookie"),l.a.createElement("td",null,m?"true":"false"),l.a.createElement("td",null,l.a.createElement("button",{onClick:A("".concat(z,"identity")),disabled:!m},"Delete"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Has Legacy Identity Cookie"),l.a.createElement("td",null,h?"true":"false"),l.a.createElement("td",null,l.a.createElement("button",{onClick:A("AMCV_5BFE274A5F6980A50A495C08%40AdobeOrg"),disabled:!h},"Delete")))))},R="CO1Z4yuO1Z4yuAcABBENArCsAP_AAH_AACiQGCNX_T5eb2vj-3Zdt_tkaYwf55y3o-wzhhaIse8NwIeH7BoGP2MwvBX4JiQCGBAkkiKBAQdtHGhcCQABgIhRiTKMYk2MjzNKJLJAilsbe0NYCD9mnsHT3ZCY70--u__7P3fAwQgkwVLwCRIWwgJJs0ohTABCOICpBwCUEIQEClhoACAnYFAR6gAAAIDAACAAAAEEEBAIABAAAkIgAAAEBAKACIBAACAEaAhAARIEAsAJEgCAAVA0JACKIIQBCDgwCjlACAoAAAAA.YAAAAAAAAAAA",Q="CO1Z5evO1Z5evAcABBENArCgAAAAAH_AACiQGCNX_T5eb2vj-3Zdt_tkaYwf55y3o-wzhhaIse8NwIeH7BoGP2MwvBX4JiQCGBAkkiKBAQdtHGhcCQABgIhRiTKMYk2MjzNKBLJAilsbe0NYCD9mnsHT3ZCY70--u__7P3fAwQgkwVLwCRIWwgJJs0ohTABCOICpBwCUEIQEClhoACAnYFAR6gAAAIDAACAAAAEEEBAIABAAAkIgAAAEBAKACIBAACAEaAhAARIEAsAJEgCAAVA0JACKIIQBCDgwCjlACAoAAAAA.YAAAAAAAAAAA",V=function(e){return{consent:[{standard:"Adobe",version:"1.0",value:{general:e}}]}},F=function(e){var t=e.collect,n=e.personalize,a={consent:[{standard:"Adobe",version:"2.0",value:{collect:{val:t}}}]};return n&&(a.consent[0].value.personalize={content:{val:n}}),a},L=function(e){return{consent:[{standard:"IAB TCF",version:"2.0",value:e}]}},J=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=t.consent;return e.consent=e.consent.concat(n),e}),{consent:[]})},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){window.alloy(e,t)}};function Y(){return m(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Consent"),l.a.createElement("h2",null,"Opt-In"),l.a.createElement("p",null,"This page tests user consent:"),l.a.createElement("dl",null,l.a.createElement("dt",null,"Current Configuration:"),l.a.createElement("dd",null,l.a.createElement(k,null)),l.a.createElement("dt",null,"Cookies:"),l.a.createElement("dd",null,l.a.createElement(M,null)),l.a.createElement("dt",null,"Adobe 1.0"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:G("setConsent",V("in"))},"In"),l.a.createElement("button",{onClick:G("setConsent",V("out"))},"Out")),l.a.createElement("dt",null,"Adobe 2.0"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:G("setConsent",F({collect:"y"}))},'Collect="y"'),l.a.createElement("button",{onClick:G("setConsent",F({collect:"n"}))},'Collect="n"'),l.a.createElement("button",{onClick:G("setConsent",F({collect:"y",personalize:"y"}))},'Collect="y" Personalize="y"'),l.a.createElement("button",{onClick:G("setConsent",F({collect:"y",personalize:"n"}))},'Collect="y" Personalize="n"')),l.a.createElement("dt",null,"IAB TCF 2.0"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:G("setConsent",L(R))},"In"),l.a.createElement("button",{onClick:G("setConsent",L(Q))},"Out"),l.a.createElement("button",{onClick:G("setConsent",L("CO2ISm8O2IbZcAVAMBFRACBsAIBAAAAgEIYgGPtjup3rYdY178JUkiCIFabBlBymqcio5Ao1cEACRNnQIUAIyhKBCQmaUqJBKhQRWBDAQtQwBCB06EBmgIQNUmkj1MQGQgCRKSF7BmQBEwQMCagoBDeRAAo-kIhkLCAAqO0E_AB4F5wAgEagLzAA"))},"Google Vendor In"),l.a.createElement("button",{onClick:G("setConsent",L("CO2IS8PO2IbuvAVAMBFRACBsAIBAAAAgEIYgGQBiNh14tYnCZ-5fXnRqprc2dYaErJs0dFpVJBA0ALi95QggwAQXEIa4JmghQMIEJASUkIIMEjHIgsJSyMEIAMIgjpJqrggEIFVAIIgPDKAULEQQkBQcCCC2mhZURCaVE0AVLMF0CNYAICNQAA=="))},"Google Vendor Out")),l.a.createElement("dt",null,"Adobe 2.0 and IAB TCF 2.0"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:G("setConsent",J(F({collect:"y"}),L(R)))},"In"),l.a.createElement("button",{onClick:G("setConsent",J(F({collect:"n"}),L(Q)))},"Out")),l.a.createElement("dt",null,"Legacy Opt-in Object"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:function(){return window.adobe.optIn.approveAll()}},"Approve All"),l.a.createElement("button",{onClick:function(){return window.adobe.optIn.denyAll()}},"Deny All")),l.a.createElement("dt",null,"Alloy Commands"),l.a.createElement("dd",null,l.a.createElement("button",{onClick:G("sendEvent")},"Send Event"),l.a.createElement("button",{onClick:G("getIdentity")},"Get Identity"))))}function K(){return m(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Personalization"),l.a.createElement("p",null,"This page tests rendering of activities using a ",l.a.createElement("i",null,"__view__")," scope. If you navigated here from another sandbox view, you will probably need to refresh your browser because this is how to properly simulate a non-SPA workflow."),l.a.createElement("div",{style:{border:"1px solid red"},className:"personalization-container"},"This is the personalization placeholder. Personalized content has not been loaded."))}var U=function(){return q({viewName:"products"}),l.a.createElement("div",null,l.a.createElement("h2",null,"Products"),l.a.createElement("div",{style:{border:"1px solid red"},id:"personalization-products-container",className:"personalization-container"},"This is the personalization placeholder for the products view. Personalized content has not been loaded."))},H=function(){return q({viewName:"cart"}),l.a.createElement("div",null,l.a.createElement("h2",null,"Cart"),l.a.createElement("div",{style:{border:"1px solid red"},id:"personalization-cart-container",className:"personalization-container"},"This is the personalization placeholder for the cart view. Personalized content has not been loaded."))},W=function(){return q({viewName:"promotion"}),l.a.createElement("div",null,l.a.createElement("h2",null,"Cart"),l.a.createElement("div",{style:{border:"1px solid red"},id:"personalization-cart-container",className:"personalization-container"},"This is the personalization placeholder for the promotion view. We use this view to test the use case when nothing was stored in cache."))},q=function(e){var t=e.viewName,n=Object(a.useState)(void 0),l=Object(I.a)(n,2),o=l[0],r=l[1];m({viewName:t,setPropositions:r}),Object(a.useEffect)((function(){o&&window.alloy("applyPropositions",{propositions:o})}))};function Z(){m();var e=Object(c.f)();return l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Personalization - SPA"),l.a.createElement("p",null,"Below are links to two different single-page app views. Each view contains personalized content set up in Target using a view scope of"," ",l.a.createElement("i",null,"product")," and ",l.a.createElement("i",null,"cart"),", respectively. Each view's personalized content contains a button whose clicks are tracked as conversions."),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(i.b,{to:"".concat(e.url,"/products")},"Products")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"".concat(e.url,"/cart")},"Cart")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"".concat(e.url,"/promotion")},"Promotion"))),l.a.createElement(c.c,null,l.a.createElement(c.a,{path:"".concat(e.path,"/products")},l.a.createElement(U,null)),l.a.createElement(c.a,{path:"".concat(e.path,"/cart")},l.a.createElement(H,null)),l.a.createElement(c.a,{path:"".concat(e.path,"/promotion")},l.a.createElement(W,null))))}function X(){return m({data:{__adobe:{target:{"profile.favoriteColor":"Black"}}}}),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Personalization Profile"),l.a.createElement("div",{id:"profile-based-offer"},"This will be replaced by an offer based on a profile attribute."))}var $=function(){window.alloy("sendEvent",{documentUnloading:!0,xdm:{"activitystreams:href":"http://www.adobe.com"}})};function ee(){return m(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Links"),l.a.createElement("p",null,"This page shows a few different ways link clicks can be handled in Alloy."),l.a.createElement("p",null,"When clicking on this ",l.a.createElement("a",{href:"https://example.com"},"exit link"),", Alloy records and transmits an exit-link web interaction event."),l.a.createElement("p",null,"When clicking on this"," ",l.a.createElement("a",{href:"download.zip",target:"_blank"},"download link"),", Alloy records and transmits a download-link web interaction event."),l.a.createElement("p",null,"When clicking on this"," ",l.a.createElement("a",{onClick:$,href:"http://www.adobe.com"},"custom link"),", Alloy is instructed to collect a custom event through a sendBeacon call (in browsers that support beacons)."),l.a.createElement("p",null,"In addition when clicking on any of the internal links (e.g. navigation menu), Alloy records and transmits a web interaction link (of type other) click event."),l.a.createElement("br",null),l.a.createElement("i",null,l.a.createElement("b",null,"TIP:"),"\xa0\xa0You can view the source of this page to gain more insight on how the different links work."))}function te(){m();var e=Object(a.useRef)(window.alloy("createEventMergeId"));return Object(a.useEffect)((function(){e.current.then((function(e){window.alloy("sendEvent",{xdm:{key1:"value1",eventMergeId:e.eventMergeId}}).catch(console.error),setTimeout((function(){window.alloy("sendEvent",{xdm:{key2:"value2",eventMergeId:e.eventMergeId}}).catch(console.error)}),3e3)}))}),[]),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Event Merge"),l.a.createElement("p",null,"This is the Event Merge view, part of the Single Page Application."),l.a.createElement("p",null,"On this view, we are sending two events at different times, merged together using an event merge ID."))}var ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n;for(n=0;n<t;n++){var a=new Uint8Array(1024*e);window.alloy("sendEvent",{documentUnloading:!0,data:{payload:a}})}}};function ae(){return m(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Large Payload"),l.a.createElement("p",null,"This page tests send really large payloads to the edge."),l.a.createElement("p",null,"All those requests should attempt to use ",l.a.createElement("code",null,"sendBeacon")," and fall back to ",l.a.createElement("code",null,"fetch")," if the request can't be queued."),l.a.createElement("p",null,"The sizes below do not include the size of the Context data:"),l.a.createElement("button",{type:"button",onClick:ne(5)},"Send 5kb payload"),l.a.createElement("button",{type:"button",onClick:ne(10)},"Send 10kb payload"),l.a.createElement("button",{type:"button",onClick:ne(20)},"Send 20kb payload"),l.a.createElement("button",{type:"button",onClick:ne(50)},"Send 50kb payload"),l.a.createElement("button",{type:"button",onClick:ne(100)},"Send 100kb payload"),l.a.createElement("button",{type:"button",onClick:ne(200)},"Send 200kb payload"),l.a.createElement("button",{type:"button",onClick:ne(5,2)},"Send 2 5kb payloads"),l.a.createElement("button",{type:"button",onClick:ne(5,3)},"Send 3 5kb payloads"),l.a.createElement("button",{type:"button",onClick:ne(5,4)},"Send 4 5kb payloads"))}function le(){return m({instanceName:"organizationTwo"}),l.a.createElement("div",null,l.a.createElement("h1",null,"Multiple Organizations"),l.a.createElement("p",null,"This view is managed by a partnering company that owns a different Org ID."),l.a.createElement("p",null,"For that reason, we have created a second instance of Alloy, and configured it using the Org and Property IDs of Organization Two."),l.a.createElement("p",null,"Alloy instance is called: ",l.a.createElement("i",null,"organizationTwo")),l.a.createElement("pre",null,l.a.createElement("code",null,'\n                organizationTwo("configure", {\n                  edgeConfigId: 8888888,\n                    log: true\n                });\n            ')),l.a.createElement("p",null,"By going to the Network tab in your Developer Tools, you should see requests ending with ",l.a.createElement("i",null,"?configId=8888888")))}function oe(){return l.a.createElement(s.a,null,l.a.createElement("meta",{"http-equiv":"Content-Security-Policy",content:"default-src 'self' *.demdex.net; script-src 'self' 'unsafe-inline' cdn.jsdelivr.net assets.adobedtm.com *.omtrdc.net; style-src 'self' 'unsafe-inline'; img-src * data:; connect-src 'self' *.adobedc.net *.demdex.net *.omtrdc.net"}))}function re(){return m(),l.a.createElement("div",null,l.a.createElement(oe,null),function(){var e=document.createElement("script");e.src="http://assets.adobedtm.com/launch-ENaa9d45a2136f487791ebc8420ec24dbe.min.js",e.async=!0,document.body.appendChild(e)}(),l.a.createElement("h1",null,"Dual Tagging"),l.a.createElement("p",null,"This page loads a launch library containing Analytics, ECID, DIL, and Target."),l.a.createElement("p",null,"This is for testing interactions between alloy and the legacy libraries. In particular we are looking for conflicts in personalization, ecid, and id/dest syncs."))}function ie(){return Object(a.useEffect)((function(){window.alloy("sendEvent",{renderDecisions:!0}).then((function(e){var t=e.decisions,n=void 0===t?[]:t;console.log("personalized decisions",n)}))}),[]),l.a.createElement("div",{className:"personalization-container"},l.a.createElement(d,null),l.a.createElement("div",null,l.a.createElement("h1",null,"Redirect Offers"),l.a.createElement("h2",null,"You shouldn't see it, this is an old page!!!"),l.a.createElement("h2",null,"The new content was moved to /redirectedNewPage ")))}function ce(){return Object(a.useEffect)((function(){window.alloy("sendEvent",{renderDecisions:!0}).then((function(e){var t=e.decisions,n=void 0===t?[]:t;console.log("personalized decisions on the redirected view",n)}))}),[]),l.a.createElement("div",{className:"personalization-container"},l.a.createElement(d,null),l.a.createElement("div",null,l.a.createElement("h1",null,"You have qualified for the redirect offer"),l.a.createElement("h2",null,"Here are the newer offers!")))}var se=n(152),de=function(e){var t=e.scopeDetails,n=(void 0===t?{}:t).characteristics,a=void 0===n?{}:n,l=a.analyticsTokens,o=a.analyticsToken;return l?l.display:o},ue=function(e){return e.size>1?Object(se.a)(e).join(","):Object(se.a)(e).join()},me=function(e){return window[e]("getIdentity",{namespaces:["ECID"]}).then((function(e){return e.identity.ECID}))};function Ee(e){var t=e.analyticsPayload,n=e.visitorID,a="https://".concat("ujsl.sc.omtrdc.net","/b/ss/").concat("ujslecommerce","/0?g=").concat(window.location,"&r=").concat(document.referrer,"&mid=").concat(n,"&tnta=").concat(t);return fetch(a).then((function(e){console.log("success",e)})).catch((function(e){console.warn("error while triggering Analytics hit",e)}))}var pe=function(e){var t=e.renderDecisions,n=window.location.pathname.split("personalizationA4TClientSide/")[1];fe({eventType:n?"view-change":"page-view",viewName:n,renderDecisions:t}).then((function(e){if(e.propositions){var t=function(e){var t=new Set;return e.forEach((function(e){var n=e.renderAttempted;if(!0===(void 0!==n&&n)){var a=de(e);a&&t.add(a)}})),ue(t)}(e.propositions);me("organizationTwo").then((function(e){Ee({analyticsPayload:t,visitorID:e})}))}}))},fe=function(e){var t=e.eventType,n=e.viewName,a=e.decisionScopes,l=e.renderDecisions,o=e.executedPropositions,r={eventType:t};return n&&(r.web={webPageDetails:{viewName:n}}),o&&(r._experience={decisioning:{propositions:o}}),window.organizationTwo("sendEvent",{renderDecisions:l,decisionScopes:a,xdm:r})},he=function(){fe({eventType:"form-based-offer",decisionScopes:["a4t-test"]}).then((function(e){if(e.propositions){var t=new Set,n=[];e.propositions.forEach((function(e){e.items.forEach((function(a){("https://ns.adobe.com/personalization/html-content-item"===a.schema&&(document.getElementById("form-based-offer-container").innerHTML=a.data.content,n.push({id:e.id,scope:e.scope,scopeDetails:e.scopeDetails}),t.add(de(e))),"https://ns.adobe.com/personalization/measurement"===a.schema)&&document.getElementById("form-based-click-metric").addEventListener("click",(function(t){fe({eventType:"decisioning.propositionInteract",executedPropositions:[{id:e.id,scope:e.scope,scopeDetails:e.scopeDetails}],instanceName:"organizationTwo"})}))}))})),fe({eventType:"decisioning.propositionDisplay",executedPropositions:n,instanceName:"organizationTwo"}),me("organizationTwo").then((function(e){Ee({analyticsPayload:ue(t),visitorID:e})}))}}))},be=function(){return pe({renderDecisions:!0}),l.a.createElement("div",null,l.a.createElement("h2",null,"Products"),l.a.createElement("div",{style:{border:"1px solid red"},id:"personalization-products-container"},"This is the personalization placeholder for the products view. Personalized content has not been loaded."))},ve=function(){return pe({renderDecisions:!0}),l.a.createElement("div",null,l.a.createElement("h2",null,"Cart"),l.a.createElement("div",{style:{border:"1px solid red"},id:"personalization-cart-container"},"This is the personalization placeholder for the cart view. Personalized content has not been loaded."))};function Ae(){Object(a.useEffect)((function(){pe({renderDecisions:!0})}),[]);var e=Object(c.f)();return l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Personalization with A4T client side logging"),l.a.createElement("p",null,"This page tests rendering of activities using a ",l.a.createElement("i",null,"__view__")," scope, collecting the analyticsTokens from the rendered propositions and trigger a Analytics hit using Data Insertion API. Important!!! If you navigated here from another sandbox view, you will probably need to refresh your browser because this is how to properly simulate a non-SPA workflow."),l.a.createElement("div",{style:{border:"1px solid red"},className:"personalization-container"},"This is the personalization placeholder. Personalized content has not been loaded."),l.a.createElement("div",null,l.a.createElement("p",null,"To retrieve a form based composed offer click on this button:"),l.a.createElement("button",{onClick:he},"Get a4t-test-scope location offer"),l.a.createElement("div",{style:{border:"1px solid red",margin:"10px 0 10px 0"},id:"form-based-offer-container"},"This is the personalization placeholder for a form based composed offer. Personalized content has not been loaded."),l.a.createElement("button",{style:{margin:"10px 0 10px 0"},id:"form-based-click-metric"}," ","Click me!")),l.a.createElement("p",null," This section is to simulate a SPA use case. "),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(i.b,{to:"".concat(e.url,"/products")},"Products")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"".concat(e.url,"/cart")},"Cart"))),l.a.createElement(c.c,null,l.a.createElement(c.a,{path:"".concat(e.path,"/products")},l.a.createElement(be,null)),l.a.createElement(c.a,{path:"".concat(e.path,"/cart")},l.a.createElement(ve,null))))}var ge=["sandbox-personalization-page2"],ye={"sandbox-personalization-page2":{selector:"#form-based-personalization",actionType:"setHtml"}};function we(){var e=Object(a.useState)(0),t=Object(I.a)(e,2),n=t[0],o=t[1];return function(){var e=Object(a.useState)(void 0),t=Object(I.a)(e,2),n=t[0],l=t[1];m({setPropositions:l,decisionScopes:ge}),Object(a.useEffect)((function(){n&&window.alloy("applyPropositions",{propositions:n,metadata:ye})}))}(),l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement("h1",null,"Personalization"),l.a.createElement("h2",null,"Number of times rendered: ",n),l.a.createElement("button",{onClick:function(){return function(e){var t=e.renderCounter;(0,e.setRenderCounter)(t+1)}({renderCounter:n,setRenderCounter:o})}},"Re-render component"),l.a.createElement("p",null,"This page tests rendering of form-based activities, which need a user-provided selector and actionType in order to be properly rendered for a given scope. If you navigated here from another sandbox view, you will probably need to refresh your browser because this is how to properly simulate a non-SPA workflow."),l.a.createElement("div",{style:{border:"1px solid red"},id:"form-based-personalization"},"This is a form-based personalization placeholder. Personalized content has not been loaded."))}var Ce=n(226),ke=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"alloy",t=Object(a.useState)("0.0.0"),n=Object(I.a)(t,2),l=n[0],o=n[1];return Object(a.useEffect)((function(){window[e]("getLibraryInfo").then((function(e){var t=e.libraryInfo.version;o(t)}))}),[e]),l}(window.__alloyNS[0]);return l.a.createElement("div",{style:{bottom:0,fontFamily:"monospace",margin:"4px",padding:"0",opacity:.4,position:"fixed",right:0,size:"0.8rem",userSelect:"none"}},e)};var Ie=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,null,l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(i.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/consent"},"Consent")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/personalization"},"Personalization")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/personalizationSpa"},"Personalization - SPA")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/personalizationA4TClientSide"},"Personalization - A4T Client Side")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/personalizationProfile"},"Personalization - Profile")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/personalizationFormBased"},"Personalization - Form Based")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/links"},"Links")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/eventMerge"},"Event-Merge")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/largePayload"},"Large Payload")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/orgTwo"},"Multiple Orgs")),l.a.createElement("li",null,l.a.createElement("a",{href:"/dualTag"},"Dual Tag")),l.a.createElement("li",null,l.a.createElement("a",{href:"/legacy.html"},"Legacy Visitor ID")),l.a.createElement("li",null,l.a.createElement("a",{href:"/redirectOffers"},"Redirect Offers")),l.a.createElement("li",null,l.a.createElement("a",{href:"/identity"},"Identity"))),l.a.createElement("hr",null),l.a.createElement(c.a,{exact:!0,path:"/",component:f}),l.a.createElement(c.a,{path:"/consent",component:Y}),l.a.createElement(c.a,{path:"/personalization",component:K}),l.a.createElement(c.a,{path:"/personalizationSpa",component:Z}),l.a.createElement(c.a,{path:"/personalizationA4TClientSide",component:Ae}),l.a.createElement(c.a,{path:"/personalizationProfile",component:X}),l.a.createElement(c.a,{path:"/personalizationFormBased",component:we}),l.a.createElement(c.a,{path:"/links",component:ee}),l.a.createElement(c.a,{path:"/eventMerge",component:te}),l.a.createElement(c.a,{path:"/largePayload",component:ae}),l.a.createElement(c.a,{path:"/orgTwo",component:le}),l.a.createElement(c.a,{path:"/dualTag",component:re}),l.a.createElement(c.a,{path:"/redirectOffers",component:ie}),l.a.createElement(c.a,{path:"/redirectedNewPage",component:ce}),l.a.createElement(c.a,{path:"/identity",component:Ce.a}))),l.a.createElement(ke,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.564cb76c.chunk.js.map