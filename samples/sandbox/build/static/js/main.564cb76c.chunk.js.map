{"version":3,"sources":["Identity.js","components/ContentSecurityPolicy.js","useSendPageViewEvent.js","Home.js","components/Cookies.js","components/Configuration.js","Consent.js","Personalization.js","PersonalizationSpa.js","PersonalizationProfile.js","Links.js","EventMerge.js","LargePayload.js","OrgTwo.js","components/UnsafeContentSecurityPolicy.js","DualTag.js","RedirectOffers.js","RedirectedNewPage.js","analyticsTokenHandler.js","DataInsertionAPI.js","personalizationAnalyticsClientSideHelper.js","PersonalizationAnalyticsClientSide.js","PersonalizationFormBased.js","components/AlloyVersion.js","App.js","serviceWorker.js","index.js"],"names":["readIdentityCookie","value","cookies","document","cookie","split","forEach","c","ct","trim","index","indexOf","key","slice","readCookies","Buffer","from","toString","substring","getIdentity","setIdentity","window","alloy","namespaces","then","result","identity","console","log","ECID","sendEvent","setConsent","consent","standard","version","collect","val","appendIdentityToUrl","event","url","target","href","preventDefault","newUrl","location","searchWithoutAdobeMc","name","replace","regex","RegExp","search","removeUrlParameter","otherHost","hostname","Identity","useState","originalIdentityCookie","setOriginalIdentityCookie","currentIdentityCookie","setCurrentIdentityCookie","useEffect","ecid","wrappedSetIdentity","onClick","ContentSecurityPolicy","Helmet","http-equiv","content","process","REACT_APP_NONCE","isNonEmptyArray","Array","isArray","length","instanceName","viewName","data","xdm","decisionScopes","setPropositions","eventType","web","webPageDetails","renderDecisions","res","propositions","sendDataToSecondaryDataset","datasetId","Home","useSendPageViewEvent","getQueryStringParameter","URLSearchParams","get","urlWithUpdatedQueryStringParameter","defaultValue","searchParams","set","delete","pathname","defaultConsent","idMigrationEnabled","includeVisitor","legacyOptIn","ConfigurationLinks","param","currentValue","options","map","label","className","KONDUCTOR_COOKIE_PREFIX","refreshCookies","getConsentCookie","getHasConsentCheckCookie","undefined","getHasIdentityCookie","getHasLegacyIdentityCookie","originalConsentCookie","originalHasConsentCheckCookie","originalHasIdentityCookie","originalHasLegacyIdentityCookie","monitor","__alloyMonitors","push","hasConsentCheck","setHasConsentCheck","hasIdentity","setHasIdentity","hasLegacyIdentity","setHasLegacyIdentity","refreshCookieState","onCommandResolved","onCommandRejected","clearCookie","disabled","IAB_OPT_IN","IAB_OPT_OUT","adobe1Consent","generalPurpose","general","adobe2Consent","personalize","setConsentOptions","iabConsent","consentString","mergeConsent","consentObjects","reduce","memo","concat","executeCommand","command","Consent","Configuration","Cookies","adobe","optIn","approveAll","denyAll","Personalization","style","border","Products","usePropositions","id","Cart","Promotion","match","useRouteMatch","to","path","__adobe","adobeLink","documentUnloading","Links","EventMerge","eventMergeIdPromise","useRef","current","key1","eventMergeId","catch","error","setTimeout","key2","makePayload","size","times","i","payload","Uint8Array","LargePayload","type","OrgTwo","UnsafeContentSecurityPolicy","DualTag","script","createElement","src","async","body","appendChild","loadLaunch","RedirectOffers","decisions","RedirectedNewPage","getDisplayAnalyticsToken","proposition","scopeDetails","characteristics","analyticsTokens","analyticsToken","display","concatenateAnalyticsPayloads","analyticsPayloads","join","getECID","sendAnalyticsPayload","analyticsPayload","visitorID","referrer","fetch","success","warn","personalizationEvent","Set","renderAttempted","add","collectAnalyticsPayloadData","executedPropositions","_experience","decisioning","getFormBasedOffer","items","item","schema","getElementById","innerHTML","scope","addEventListener","PersonalizationAnalyticsClientSide","margin","SCOPES_FOR_PAGE","metadata","selector","actionType","renderCounter","setRenderCounter","updateComponent","alloyVersion","setVersion","libraryInfo","useAlloyVersion","__alloyNS","bottom","fontFamily","padding","opacity","position","right","userSelect","BasicExample","exact","component","PersonalizationSpa","PersonalizationProfile","PersonalizationFormBased","AlloyVersion","Boolean","ReactDOM","render","App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.564cb76c.chunk.js","sourcesContent":["/*\n Copyright 2022 Adobe. All rights reserved.\n This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License. You may obtain a copy\n of the License at http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software distributed under\n the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n OF ANY KIND, either express or implied. See the License for the specific language\n governing permissions and limitations under the License.\n */\n\nimport React, { useEffect, useState } from \"react\";\n\nconst readCookies = () => {\n  const cookies = {};\n  document.cookie.split(\";\").forEach(function(c) {\n    const ct = c.trim();\n    const index = ct.indexOf(\"=\");\n    const key = ct.slice(0, index);\n    const value = ct.slice(index + 1);\n    cookies[key] = value;\n  });\n  return cookies;\n};\nconst readIdentityCookie = () => {\n  const cookies = readCookies();\n  const value = cookies[\"kndctr_5BFE274A5F6980A50A495C08_AdobeOrg_identity\"];\n  if (!value) {\n    return \"None\";\n  }\n  const decoded = Buffer.from(value, \"base64\").toString();\n  return decoded.substring(2, 40);\n};\n\nconst getIdentity = setIdentity => () => {\n  window.alloy(\"getIdentity\", { namespaces: [\"ECID\"] }).then(function(result) {\n    if (result.identity) {\n      console.log(\n        \"Sandbox: Get Identity command has completed.\",\n        result.identity.ECID\n      );\n      setIdentity(result.identity.ECID);\n    } else {\n      console.log(\n        \"Sandbox: Get Identity command has completed but no identity was provided in the result (possibly due to lack of consent).\"\n      );\n      setIdentity(\"No Identity\");\n    }\n  });\n};\n\nconst sendEvent = setIdentity => () => {\n  window.alloy(\"sendEvent\", {}).then(getIdentity(setIdentity));\n};\n\nconst setConsent = setIdentity => () => {\n  window\n    .alloy(\"setConsent\", {\n      consent: [\n        {\n          standard: \"Adobe\",\n          version: \"2.0\",\n          value: {\n            collect: {\n              val: \"y\"\n            }\n          }\n        }\n      ]\n    })\n    .then(getIdentity(setIdentity));\n};\n\nconst appendIdentityToUrl = event => {\n  const url = event.target.href;\n  event.preventDefault();\n  window.alloy(\"appendIdentityToUrl\", { url }).then(({ url: newUrl }) => {\n    document.location = newUrl;\n  });\n};\n\nconst removeUrlParameter = name => {\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n  return document.location.search.replace(regex, \"\").replace(/^&/, \"?\");\n};\nconst searchWithoutAdobeMc = removeUrlParameter(\"adobe_mc\");\n\nconst otherHost =\n  document.location.hostname === \"alloyio.com\" ? \"alloyio2.com\" : \"alloyio.com\";\n\nexport default function Identity() {\n  const [originalIdentityCookie, setOriginalIdentityCookie] = useState(\"\");\n  const [currentIdentityCookie, setCurrentIdentityCookie] = useState(\"\");\n  const [identity, setIdentity] = useState(\"\");\n\n  useEffect(() => {\n    const ecid = readIdentityCookie();\n    setOriginalIdentityCookie(ecid);\n    setCurrentIdentityCookie(ecid);\n  }, []);\n\n  const wrappedSetIdentity = ecid => {\n    setIdentity(ecid);\n    setCurrentIdentityCookie(readIdentityCookie());\n  };\n\n  return (\n    <div>\n      <h1>Identity</h1>\n      <section>\n        This page demonstrates recieving or sending identity within the URL. No\n        calls to experience edge are made until you press one of the buttons\n        below. The table shows the current and original identities. If you click\n        on the link on the bottom, it will generate a link to another domain\n        with the ID included in the URL.\n      </section>\n      <section>\n        <button onClick={getIdentity(wrappedSetIdentity)}>Get Identity</button>\n        <button onClick={sendEvent(wrappedSetIdentity)}>Send Event</button>\n        <button onClick={setConsent(wrappedSetIdentity)}>Set Consent</button>\n      </section>\n      <section>\n        <table>\n          <tbody>\n            <tr>\n              <td>Original Identity Cookie</td>\n              <td>\n                <pre>{originalIdentityCookie}</pre>\n              </td>\n            </tr>\n            <tr>\n              <td>Current Identity Cookie</td>\n              <td>\n                <pre>{currentIdentityCookie}</pre>\n              </td>\n            </tr>\n            <tr>\n              <td>Identity from Web SDK</td>\n              <td>\n                <pre>{identity}</pre>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n      <section>\n        <a href={`/Identity${searchWithoutAdobeMc}`}>Web SDK identity page</a>\n        <br />\n        <a href={`/legacy.html${searchWithoutAdobeMc}`}>Legacy identity page</a>\n        <br />\n        <a\n          href={`https://${otherHost}/identity${searchWithoutAdobeMc}`}\n          onClick={appendIdentityToUrl}\n        >\n          Cross domain Web SDK identity page\n        </a>\n        <br />\n        <a\n          href={`https://${otherHost}/legacy.html${searchWithoutAdobeMc}`}\n          onClick={appendIdentityToUrl}\n        >\n          Cross domain legacy identity page\n        </a>\n        <br />\n      </section>\n    </div>\n  );\n}\n","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function ContentSecurityPolicy() {\n  return (\n    <Helmet>\n      <meta\n        http-equiv=\"Content-Security-Policy\"\n        // cdn.tt.omtrdc.net is necessary for Target VEC to function properly.\n        // *.sc.omtrdc.net is necessary for Analytics Data Insertion API to function properly\n        content={`default-src 'self';\n              script-src 'self' 'nonce-${process.env.REACT_APP_NONCE}' cdn.jsdelivr.net assets.adobedtm.com cdn.tt.omtrdc.net;\n              style-src 'self' 'unsafe-inline';\n              img-src * data:;\n              connect-src 'self' *.alloyio.com *.adobedc.net *.demdex.net *.sc.omtrdc.net`}\n      />\n    </Helmet>\n  );\n}\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport { useEffect } from \"react\";\n\nconst isNonEmptyArray = value => Array.isArray(value) && value.length > 0;\n\nexport default ({\n  instanceName = \"alloy\",\n  viewName,\n  data = {},\n  xdm = {},\n  decisionScopes = [\"sandbox-personalization-page\"],\n  setPropositions\n} = {}) => {\n  useEffect(() => {\n    xdm.eventType = \"page-view\";\n\n    if (viewName) {\n      xdm.web = {\n        webPageDetails: {\n          viewName\n        }\n      };\n    }\n\n    window[instanceName](\"sendEvent\", {\n      renderDecisions: true,\n      decisionScopes,\n      xdm,\n      data\n    }).then(res => {\n      console.log(res);\n      const { propositions } = res;\n      if (setPropositions && isNonEmptyArray(propositions)) {\n        setPropositions(propositions);\n      }\n    });\n  }, [instanceName, viewName]);\n};\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nconst getIdentity = () => {\n  window.alloy(\"getIdentity\", { namespaces: [\"ECID\"] }).then(function(result) {\n    if (result.identity) {\n      console.log(\n        \"Sandbox: Get Identity command has completed.\",\n        result.identity.ECID\n      );\n    } else {\n      console.log(\n        \"Sandbox: Get Identity command has completed but no identity was provided in the result (possibly due to lack of consent).\"\n      );\n    }\n  });\n};\n\nconst sendDataToSecondaryDataset = () => {\n  window.alloy(\"sendEvent\", {\n    datasetId: \"5eb9aaa6a3b16e18a818e06f\"\n  });\n};\n\nexport default function Home() {\n  useSendPageViewEvent();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Home</h1>\n      <section>\n        <h2>Get Identity</h2>\n        <div>\n          <button onClick={getIdentity}>Get ECID</button>\n        </div>\n      </section>\n      <section>\n        <h2>Collect data by overriding the Dataset configured in Config UI</h2>\n        <div>\n          <button onClick={sendDataToSecondaryDataset}>\n            Send Event to Secondary Dataset\n          </button>\n        </div>\n      </section>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nconst KONDUCTOR_COOKIE_PREFIX = \"kndctr_5BFE274A5F6980A50A495C08_AdobeOrg_\";\nconst LEGACY_IDENTITY_COOKIE = \"AMCV_5BFE274A5F6980A50A495C08%40AdobeOrg\";\n\nlet cookies;\nconst refreshCookies = () => {\n  cookies = {};\n  document.cookie.split(\";\").forEach(function(c) {\n    const ct = c.trim();\n    const index = ct.indexOf(\"=\");\n    const key = ct.slice(0, index);\n    const value = ct.slice(index + 1);\n    cookies[key] = value;\n  });\n};\nconst getConsentCookie = () => {\n  return cookies[`${KONDUCTOR_COOKIE_PREFIX}consent`];\n};\nconst getHasConsentCheckCookie = () => {\n  return cookies[`${KONDUCTOR_COOKIE_PREFIX}consent_check`] !== undefined;\n};\nconst getHasIdentityCookie = () => {\n  return cookies[`${KONDUCTOR_COOKIE_PREFIX}identity`] !== undefined;\n};\nconst getHasLegacyIdentityCookie = () => {\n  return cookies[LEGACY_IDENTITY_COOKIE] !== undefined;\n};\nrefreshCookies();\nconst originalConsentCookie = getConsentCookie();\nconst originalHasConsentCheckCookie = getHasConsentCheckCookie();\nconst originalHasIdentityCookie = getHasIdentityCookie();\nconst originalHasLegacyIdentityCookie = getHasLegacyIdentityCookie();\n\nconst monitor = {};\nwindow.__alloyMonitors = window.__alloyMonitors || [];\nwindow.__alloyMonitors.push(monitor);\n\nexport default () => {\n  const [consent, setConsent] = useState(originalConsentCookie);\n  const [hasConsentCheck, setHasConsentCheck] = useState(\n    originalHasConsentCheckCookie\n  );\n  const [hasIdentity, setHasIdentity] = useState(originalHasIdentityCookie);\n  const [hasLegacyIdentity, setHasLegacyIdentity] = useState(\n    originalHasLegacyIdentityCookie\n  );\n\n  const refreshCookieState = () => {\n    refreshCookies();\n    setConsent(getConsentCookie());\n    setHasConsentCheck(getHasConsentCheckCookie());\n    setHasIdentity(getHasIdentityCookie());\n    setHasLegacyIdentity(getHasLegacyIdentityCookie());\n  };\n\n  useEffect(() => {\n    monitor.onCommandResolved = refreshCookieState;\n    monitor.onCommandRejected = refreshCookieState;\n  });\n\n  const clearCookie = key => () => {\n    document.cookie = `${key}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n    refreshCookieState();\n  };\n\n  return (\n    <table>\n      <tbody>\n        <tr>\n          <td>Consent Cookie</td>\n          <td>{consent}</td>\n          <td>\n            <button\n              onClick={clearCookie(`${KONDUCTOR_COOKIE_PREFIX}consent`)}\n              disabled={consent === undefined}\n            >\n              Delete\n            </button>\n          </td>\n        </tr>\n        <tr>\n          <td>Has Consent Check Cookie</td>\n          <td>{hasConsentCheck ? \"true\" : \"false\"}</td>\n          <td>\n            <button\n              onClick={clearCookie(`${KONDUCTOR_COOKIE_PREFIX}consent_check`)}\n              disabled={!hasConsentCheck}\n            >\n              Delete\n            </button>\n          </td>\n        </tr>\n        <tr>\n          <td>Has Identity Cookie</td>\n          <td>{hasIdentity ? \"true\" : \"false\"}</td>\n          <td>\n            <button\n              onClick={clearCookie(`${KONDUCTOR_COOKIE_PREFIX}identity`)}\n              disabled={!hasIdentity}\n            >\n              Delete\n            </button>\n          </td>\n        </tr>\n        <tr>\n          <td>Has Legacy Identity Cookie</td>\n          <td>{hasLegacyIdentity ? \"true\" : \"false\"}</td>\n          <td>\n            <button\n              onClick={clearCookie(LEGACY_IDENTITY_COOKIE)}\n              disabled={!hasLegacyIdentity}\n            >\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n","import React from \"react\";\n\nconst getQueryStringParameter = key => {\n  var searchParams = new URLSearchParams(window.location.search);\n  return searchParams.get(key);\n};\n\nconst urlWithUpdatedQueryStringParameter = (key, value, defaultValue) => {\n  var searchParams = new URLSearchParams(window.location.search);\n  if (value !== defaultValue) {\n    searchParams.set(key, value);\n  } else {\n    searchParams.delete(key);\n  }\n  return window.location.pathname + \"?\" + searchParams;\n};\n\nconst defaultConsent = getQueryStringParameter(\"defaultConsent\") || \"in\";\nconst idMigrationEnabled =\n  getQueryStringParameter(\"idMigrationEnabled\") !== \"false\";\nconst includeVisitor = getQueryStringParameter(\"includeVisitor\") === \"true\";\nconst legacyOptIn = getQueryStringParameter(\"legacyOptIn\") === \"true\";\n\nconst ConfigurationLinks = ({ param, currentValue, defaultValue, options }) => {\n  return options.map(({ value, label }, index) => {\n    if (value === currentValue) {\n      return (\n        <span key={index} className=\"disabled\">\n          {label}\n        </span>\n      );\n    } else {\n      return (\n        <a\n          key={index}\n          href={urlWithUpdatedQueryStringParameter(param, value, defaultValue)}\n        >\n          {label}\n        </a>\n      );\n    }\n  });\n};\n\nexport default () => {\n  return (\n    <table className=\"configuration\">\n      <tbody>\n        <tr>\n          <td>defaultConsent</td>\n          <td>{defaultConsent}</td>\n          <td>\n            <ConfigurationLinks\n              param=\"defaultConsent\"\n              currentValue={defaultConsent}\n              defaultValue=\"in\"\n              options={[\n                { value: \"pending\", label: \"Set to pending\" },\n                { value: \"in\", label: \"Set to in\" },\n                { value: \"out\", label: \"Set to out\" }\n              ]}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td>idMigrationEnabled</td>\n          <td>{idMigrationEnabled.toString()}</td>\n          <td>\n            <ConfigurationLinks\n              param=\"idMigrationEnabled\"\n              currentValue={idMigrationEnabled}\n              defaultValue=\"true\"\n              options={[\n                { value: true, label: \"Enable\" },\n                { value: false, label: \"Disable\" }\n              ]}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td>Include Visitor.js</td>\n          <td>{includeVisitor.toString()}</td>\n          <td>\n            <ConfigurationLinks\n              param=\"includeVisitor\"\n              currentValue={includeVisitor}\n              defaultValue=\"false\"\n              options={[\n                { value: true, label: \"Include\" },\n                { value: false, label: \"Remove\" }\n              ]}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td>Enable Opt-in in Visitor</td>\n          <td>{legacyOptIn.toString()}</td>\n          <td>\n            <ConfigurationLinks\n              param=\"legacyOptIn\"\n              currentValue={legacyOptIn}\n              defaultValue=\"false\"\n              options={[\n                { value: true, label: \"Enable\" },\n                { value: false, label: \"Disable\" }\n              ]}\n            />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\nimport \"./Consent.css\";\nimport Configuration from \"./components/Configuration\";\nimport Cookies from \"./components/Cookies\";\n\nconst IAB_OPT_IN =\n  \"CO1Z4yuO1Z4yuAcABBENArCsAP_AAH_AACiQGCNX_T5eb2vj-3Zdt_tkaYwf55y3o-wzhhaIse8NwIeH7BoGP2MwvBX4JiQCGBAkkiKBAQdtHGhcCQABgIhRiTKMYk2MjzNKJLJAilsbe0NYCD9mnsHT3ZCY70--u__7P3fAwQgkwVLwCRIWwgJJs0ohTABCOICpBwCUEIQEClhoACAnYFAR6gAAAIDAACAAAAEEEBAIABAAAkIgAAAEBAKACIBAACAEaAhAARIEAsAJEgCAAVA0JACKIIQBCDgwCjlACAoAAAAA.YAAAAAAAAAAA\";\nconst IAB_OPT_OUT =\n  \"CO1Z5evO1Z5evAcABBENArCgAAAAAH_AACiQGCNX_T5eb2vj-3Zdt_tkaYwf55y3o-wzhhaIse8NwIeH7BoGP2MwvBX4JiQCGBAkkiKBAQdtHGhcCQABgIhRiTKMYk2MjzNKBLJAilsbe0NYCD9mnsHT3ZCY70--u__7P3fAwQgkwVLwCRIWwgJJs0ohTABCOICpBwCUEIQEClhoACAnYFAR6gAAAIDAACAAAAEEEBAIABAAAkIgAAAEBAKACIBAACAEaAhAARIEAsAJEgCAAVA0JACKIIQBCDgwCjlACAoAAAAA.YAAAAAAAAAAA\";\nconst IAB_OPT_IN_GOOGLE_VENDOR =\n  \"CO2ISm8O2IbZcAVAMBFRACBsAIBAAAAgEIYgGPtjup3rYdY178JUkiCIFabBlBymqcio5Ao1cEACRNnQIUAIyhKBCQmaUqJBKhQRWBDAQtQwBCB06EBmgIQNUmkj1MQGQgCRKSF7BmQBEwQMCagoBDeRAAo-kIhkLCAAqO0E_AB4F5wAgEagLzAA\";\nconst IAB_OPT_OUT_GOOGLE_VENDOR =\n  \"CO2IS8PO2IbuvAVAMBFRACBsAIBAAAAgEIYgGQBiNh14tYnCZ-5fXnRqprc2dYaErJs0dFpVJBA0ALi95QggwAQXEIa4JmghQMIEJASUkIIMEjHIgsJSyMEIAMIgjpJqrggEIFVAIIgPDKAULEQQkBQcCCC2mhZURCaVE0AVLMF0CNYAICNQAA==\";\n\nconst adobe1Consent = generalPurpose => {\n  return {\n    consent: [\n      {\n        standard: \"Adobe\",\n        version: \"1.0\",\n        value: {\n          general: generalPurpose\n        }\n      }\n    ]\n  };\n};\n\nconst adobe2Consent = ({ collect, personalize }) => {\n  const setConsentOptions = {\n    consent: [\n      {\n        standard: \"Adobe\",\n        version: \"2.0\",\n        value: {\n          collect: {\n            val: collect\n          }\n        }\n      }\n    ]\n  };\n  if (personalize) {\n    setConsentOptions.consent[0].value.personalize = {\n      content: {\n        val: personalize\n      }\n    };\n  }\n  return setConsentOptions;\n};\n\nconst iabConsent = consentString => {\n  return {\n    consent: [\n      {\n        standard: \"IAB TCF\",\n        version: \"2.0\",\n        value: consentString\n      }\n    ]\n  };\n};\n\nconst mergeConsent = (...consentObjects) => {\n  return consentObjects.reduce(\n    (memo, { consent }) => {\n      memo.consent = memo.consent.concat(consent);\n      return memo;\n    },\n    { consent: [] }\n  );\n};\n\nconst executeCommand = (command, options = {}) => () => {\n  window.alloy(command, options);\n};\n\nexport default function Consent() {\n  useSendPageViewEvent();\n\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Consent</h1>\n      <h2>Opt-In</h2>\n      <p>This page tests user consent:</p>\n\n      <dl>\n        <dt>Current Configuration:</dt>\n        <dd>\n          <Configuration />\n        </dd>\n        <dt>Cookies:</dt>\n        <dd>\n          <Cookies />\n        </dd>\n        <dt>Adobe 1.0</dt>\n        <dd>\n          <button onClick={executeCommand(\"setConsent\", adobe1Consent(\"in\"))}>\n            In\n          </button>\n          <button onClick={executeCommand(\"setConsent\", adobe1Consent(\"out\"))}>\n            Out\n          </button>\n        </dd>\n        <dt>Adobe 2.0</dt>\n        <dd>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              adobe2Consent({ collect: \"y\" })\n            )}\n          >\n            Collect=\"y\"\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              adobe2Consent({ collect: \"n\" })\n            )}\n          >\n            Collect=\"n\"\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              adobe2Consent({ collect: \"y\", personalize: \"y\" })\n            )}\n          >\n            Collect=\"y\" Personalize=\"y\"\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              adobe2Consent({ collect: \"y\", personalize: \"n\" })\n            )}\n          >\n            Collect=\"y\" Personalize=\"n\"\n          </button>\n        </dd>\n        <dt>IAB TCF 2.0</dt>\n        <dd>\n          <button\n            onClick={executeCommand(\"setConsent\", iabConsent(IAB_OPT_IN))}\n          >\n            In\n          </button>\n          <button\n            onClick={executeCommand(\"setConsent\", iabConsent(IAB_OPT_OUT))}\n          >\n            Out\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              iabConsent(IAB_OPT_IN_GOOGLE_VENDOR)\n            )}\n          >\n            Google Vendor In\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              iabConsent(IAB_OPT_OUT_GOOGLE_VENDOR)\n            )}\n          >\n            Google Vendor Out\n          </button>\n        </dd>\n        <dt>Adobe 2.0 and IAB TCF 2.0</dt>\n        <dd>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              mergeConsent(\n                adobe2Consent({ collect: \"y\" }),\n                iabConsent(IAB_OPT_IN)\n              )\n            )}\n          >\n            In\n          </button>\n          <button\n            onClick={executeCommand(\n              \"setConsent\",\n              mergeConsent(\n                adobe2Consent({ collect: \"n\" }),\n                iabConsent(IAB_OPT_OUT)\n              )\n            )}\n          >\n            Out\n          </button>\n        </dd>\n        <dt>Legacy Opt-in Object</dt>\n        <dd>\n          <button onClick={() => window.adobe.optIn.approveAll()}>\n            Approve All\n          </button>\n          <button onClick={() => window.adobe.optIn.denyAll()}>Deny All</button>\n        </dd>\n        <dt>Alloy Commands</dt>\n        <dd>\n          <button onClick={executeCommand(\"sendEvent\")}>Send Event</button>\n          <button onClick={executeCommand(\"getIdentity\")}>Get Identity</button>\n        </dd>\n      </dl>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nexport default function Personalization() {\n  useSendPageViewEvent();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Personalization</h1>\n      <p>\n        This page tests rendering of activities using a <i>__view__</i> scope.\n        If you navigated here from another sandbox view, you will probably need\n        to refresh your browser because this is how to properly simulate a\n        non-SPA workflow.\n      </p>\n      <div\n        style={{ border: \"1px solid red\" }}\n        className=\"personalization-container\"\n      >\n        This is the personalization placeholder. Personalized content has not\n        been loaded.\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Switch, Route, useRouteMatch, Link } from \"react-router-dom\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nconst Products = () => {\n  usePropositions({ viewName: \"products\" });\n  return (\n    <div>\n      <h2>Products</h2>\n      <div\n        style={{ border: \"1px solid red\" }}\n        id=\"personalization-products-container\"\n        className=\"personalization-container\"\n      >\n        This is the personalization placeholder for the products view.\n        Personalized content has not been loaded.\n      </div>\n    </div>\n  );\n};\n\nconst Cart = () => {\n  usePropositions({ viewName: \"cart\" });\n  return (\n    <div>\n      <h2>Cart</h2>\n      <div\n        style={{ border: \"1px solid red\" }}\n        id=\"personalization-cart-container\"\n        className=\"personalization-container\"\n      >\n        This is the personalization placeholder for the cart view. Personalized\n        content has not been loaded.\n      </div>\n    </div>\n  );\n};\nconst Promotion = () => {\n  usePropositions({ viewName: \"promotion\" });\n  return (\n    <div>\n      <h2>Cart</h2>\n      <div\n        style={{ border: \"1px solid red\" }}\n        id=\"personalization-cart-container\"\n        className=\"personalization-container\"\n      >\n        This is the personalization placeholder for the promotion view. We use\n        this view to test the use case when nothing was stored in cache.\n      </div>\n    </div>\n  );\n};\n\nconst usePropositions = ({ viewName }) => {\n  const [propositions, setPropositions] = useState(undefined);\n  useSendPageViewEvent({ viewName, setPropositions });\n  useEffect(() => {\n    if (propositions) {\n      window.alloy(\"applyPropositions\", {\n        propositions\n      });\n    }\n  });\n};\n\nexport default function Personalization() {\n  useSendPageViewEvent();\n  const match = useRouteMatch();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Personalization - SPA</h1>\n      <p>\n        Below are links to two different single-page app views. Each view\n        contains personalized content set up in Target using a view scope of{\" \"}\n        <i>product</i> and <i>cart</i>, respectively. Each view's personalized\n        content contains a button whose clicks are tracked as conversions.\n      </p>\n      <ul>\n        <li>\n          <Link to={`${match.url}/products`}>Products</Link>\n        </li>\n        <li>\n          <Link to={`${match.url}/cart`}>Cart</Link>\n        </li>\n        <li>\n          <Link to={`${match.url}/promotion`}>Promotion</Link>\n        </li>\n      </ul>\n      <Switch>\n        <Route path={`${match.path}/products`}>\n          <Products />\n        </Route>\n        <Route path={`${match.path}/cart`}>\n          <Cart />\n        </Route>\n        <Route path={`${match.path}/promotion`}>\n          <Promotion />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nexport default function Personalization() {\n  useSendPageViewEvent({\n    data: {\n      __adobe: {\n        target: {\n          \"profile.favoriteColor\": \"Black\"\n        }\n      }\n    }\n  });\n\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Personalization Profile</h1>\n      <div id=\"profile-based-offer\">\n        This will be replaced by an offer based on a profile attribute.\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nconst adobeLink = () => {\n  window.alloy(\"sendEvent\", {\n    documentUnloading: true,\n    xdm: {\n      \"activitystreams:href\": \"http://www.adobe.com\"\n    }\n  });\n};\n\nexport default function Links() {\n  useSendPageViewEvent();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Links</h1>\n      <p>\n        This page shows a few different ways link clicks can be handled in\n        Alloy.\n      </p>\n      <p>\n        When clicking on this <a href=\"https://example.com\">exit link</a>, Alloy\n        records and transmits an exit-link web interaction event.\n      </p>\n      <p>\n        When clicking on this{\" \"}\n        <a href=\"download.zip\" target=\"_blank\">\n          download link\n        </a>\n        , Alloy records and transmits a download-link web interaction event.\n      </p>\n      <p>\n        When clicking on this{\" \"}\n        <a onClick={adobeLink} href=\"http://www.adobe.com\">\n          custom link\n        </a>\n        , Alloy is instructed to collect a custom event through a sendBeacon\n        call (in browsers that support beacons).\n      </p>\n      <p>\n        In addition when clicking on any of the internal links (e.g. navigation\n        menu), Alloy records and transmits a web interaction link (of type\n        other) click event.\n      </p>\n      <br />\n      <i>\n        <b>TIP:</b>&nbsp;&nbsp;You can view the source of this page to gain more\n        insight on how the different links work.\n      </i>\n    </div>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nexport default function EventMerge() {\n  useSendPageViewEvent();\n  const eventMergeIdPromise = useRef(window.alloy(\"createEventMergeId\"));\n\n  useEffect(() => {\n    eventMergeIdPromise.current.then(result => {\n      window\n        .alloy(\"sendEvent\", {\n          xdm: {\n            key1: \"value1\",\n            eventMergeId: result.eventMergeId\n          }\n        })\n        .catch(console.error);\n\n      setTimeout(() => {\n        window\n          .alloy(\"sendEvent\", {\n            xdm: {\n              key2: \"value2\",\n              eventMergeId: result.eventMergeId\n            }\n          })\n          .catch(console.error);\n      }, 3000);\n    });\n  }, []);\n\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Event Merge</h1>\n      <p>This is the Event Merge view, part of the Single Page Application.</p>\n      <p>\n        On this view, we are sending two events at different times, merged\n        together using an event merge ID.\n      </p>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nconst makePayload = (size, times = 1) => () => {\n  var i;\n  for (i = 0; i < times; i++) {\n    const payload = new Uint8Array(size * 1024);\n    window.alloy(\"sendEvent\", {\n      documentUnloading: true,\n      data: {\n        payload\n      }\n    });\n  }\n};\n\nexport default function LargePayload() {\n  useSendPageViewEvent();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Large Payload</h1>\n      <p>This page tests send really large payloads to the edge.</p>\n      <p>\n        All those requests should attempt to use <code>sendBeacon</code> and\n        fall back to <code>fetch</code> if the request can't be queued.\n      </p>\n      <p>The sizes below do not include the size of the Context data:</p>\n\n      <button type=\"button\" onClick={makePayload(5)}>\n        Send 5kb payload\n      </button>\n      <button type=\"button\" onClick={makePayload(10)}>\n        Send 10kb payload\n      </button>\n      <button type=\"button\" onClick={makePayload(20)}>\n        Send 20kb payload\n      </button>\n      <button type=\"button\" onClick={makePayload(50)}>\n        Send 50kb payload\n      </button>\n      <button type=\"button\" onClick={makePayload(100)}>\n        Send 100kb payload\n      </button>\n      <button type=\"button\" onClick={makePayload(200)}>\n        Send 200kb payload\n      </button>\n\n      <button type=\"button\" onClick={makePayload(5, 2)}>\n        Send 2 5kb payloads\n      </button>\n      <button type=\"button\" onClick={makePayload(5, 3)}>\n        Send 3 5kb payloads\n      </button>\n      <button type=\"button\" onClick={makePayload(5, 4)}>\n        Send 4 5kb payloads\n      </button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nexport default function OrgTwo() {\n  useSendPageViewEvent({ instanceName: \"organizationTwo\" });\n  return (\n    <div>\n      <h1>Multiple Organizations</h1>\n      <p>\n        This view is managed by a partnering company that owns a different Org\n        ID.\n      </p>\n      <p>\n        For that reason, we have created a second instance of Alloy, and\n        configured it using the Org and Property IDs of Organization Two.\n      </p>\n      <p>\n        Alloy instance is called: <i>organizationTwo</i>\n      </p>\n      <pre>\n        <code>\n          {`\n                organizationTwo(\"configure\", {\n                  edgeConfigId: 8888888,\n                    log: true\n                });\n            `}\n        </code>\n      </pre>\n      <p>\n        By going to the Network tab in your Developer Tools, you should see\n        requests ending with <i>?configId=8888888</i>\n      </p>\n    </div>\n  );\n}\n","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function UnsafeContentSecurityPolicy() {\n  return (\n    <Helmet>\n      <meta\n        http-equiv=\"Content-Security-Policy\"\n        content=\"default-src 'self' *.demdex.net;\n              script-src 'self' 'unsafe-inline' cdn.jsdelivr.net assets.adobedtm.com *.omtrdc.net;\n              style-src 'self' 'unsafe-inline';\n              img-src * data:;\n              connect-src 'self' *.adobedc.net *.demdex.net *.omtrdc.net\"\n      />\n    </Helmet>\n  );\n}\n","import React from \"react\";\nimport UnsafeContentSecurityPolicy from \"./components/UnsafeContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nfunction loadLaunch() {\n  const script = document.createElement(\"script\");\n  script.src =\n    \"http://assets.adobedtm.com/launch-ENaa9d45a2136f487791ebc8420ec24dbe.min.js\";\n  script.async = true;\n  document.body.appendChild(script);\n}\n\nexport default function DualTag() {\n  useSendPageViewEvent();\n  return (\n    <div>\n      {/* Need less restrictive CSP for old libraries */}\n      <UnsafeContentSecurityPolicy />\n      {loadLaunch()}\n      <h1>Dual Tagging</h1>\n      <p>\n        This page loads a launch library containing Analytics, ECID, DIL, and\n        Target.\n      </p>\n      <p>\n        This is for testing interactions between alloy and the legacy libraries.\n        In particular we are looking for conflicts in personalization, ecid, and\n        id/dest syncs.\n      </p>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\n\nexport default function RedirectOffers() {\n  useEffect(() => {\n    window\n      .alloy(\"sendEvent\", {\n        renderDecisions: true\n      })\n      .then(({ decisions = [] }) => {\n        console.log(\"personalized decisions\", decisions);\n      });\n  }, []);\n\n  return (\n    <div className=\"personalization-container\">\n      <ContentSecurityPolicy />\n      <div>\n        <h1>Redirect Offers</h1>\n        <h2>You shouldn't see it, this is an old page!!!</h2>\n\n        <h2>The new content was moved to /redirectedNewPage </h2>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\n\nexport default function RedirectedNewPage() {\n  useEffect(() => {\n    window\n      .alloy(\"sendEvent\", {\n        renderDecisions: true\n      })\n      .then(({ decisions = [] }) => {\n        console.log(\"personalized decisions on the redirected view\", decisions);\n      });\n  }, []);\n  return (\n    <div className=\"personalization-container\">\n      <ContentSecurityPolicy />\n      <div>\n        <h1>You have qualified for the redirect offer</h1>\n        <h2>Here are the newer offers!</h2>\n      </div>\n    </div>\n  );\n}\n","export const getDisplayAnalyticsToken = proposition => {\n  const { scopeDetails = {} } = proposition;\n  const { characteristics = {} } = scopeDetails;\n  const { analyticsTokens, analyticsToken } = characteristics;\n\n  if (analyticsTokens) {\n    return analyticsTokens.display;\n  }\n  return analyticsToken;\n};\n\nexport const concatenateAnalyticsPayloads = analyticsPayloads => {\n  if (analyticsPayloads.size > 1) {\n    return [...analyticsPayloads].join(\",\");\n  }\n  return [...analyticsPayloads].join();\n};\n\nexport const collectAnalyticsPayloadData = propositions => {\n  const analyticsPayloads = new Set();\n\n  propositions.forEach(proposition => {\n    const { renderAttempted = false } = proposition;\n\n    if (renderAttempted !== true) {\n      return;\n    }\n\n    const analyticsPayload = getDisplayAnalyticsToken(proposition);\n\n    if (!analyticsPayload) {\n      return;\n    }\n\n    analyticsPayloads.add(analyticsPayload);\n  });\n\n  return concatenateAnalyticsPayloads(analyticsPayloads);\n};\n\nexport const getECID = instanceName => {\n  return window[instanceName](\"getIdentity\", { namespaces: [\"ECID\"] }).then(\n    result => {\n      return result.identity.ECID;\n    }\n  );\n};\n","const trackingServer = \"ujsl.sc.omtrdc.net\";\nconst reportSuite = \"ujslecommerce\";\n\nexport function sendAnalyticsPayload({ analyticsPayload, visitorID }) {\n  const url = `https://${trackingServer}/b/ss/${reportSuite}/0?g=${window.location}&r=${document.referrer}&mid=${visitorID}&tnta=${analyticsPayload}`;\n\n  return fetch(url)\n    .then(success => {\n      console.log(\"success\", success);\n    })\n    .catch(error => {\n      console.warn(\"error while triggering Analytics hit\", error);\n    });\n}\n","import {\n  collectAnalyticsPayloadData,\n  concatenateAnalyticsPayloads,\n  getDisplayAnalyticsToken,\n  getECID\n} from \"./analyticsTokenHandler\";\nimport { sendAnalyticsPayload } from \"./DataInsertionAPI\";\n\n// this org is configured to have Analytics disabled thus it is A4T Client Side Logging\nconst instanceName = \"organizationTwo\";\n\n// offer types\nconst HTML_SCHEMA = \"https://ns.adobe.com/personalization/html-content-item\";\nconst MEASUREMENT_SCHEMA = \"https://ns.adobe.com/personalization/measurement\";\n\nconst extractViewName = () => {\n  const pathname = window.location.pathname;\n  const viewName = pathname.split(\"personalizationA4TClientSide/\");\n\n  return viewName[1];\n};\n\nexport const personalizationEvent = ({ renderDecisions }) => {\n  const viewName = extractViewName();\n  const eventType = viewName ? \"view-change\" : \"page-view\";\n  sendEvent({ eventType, viewName, renderDecisions }).then(result => {\n    if (!result.propositions) {\n      return;\n    }\n\n    const analyticsPayload = collectAnalyticsPayloadData(result.propositions);\n    getECID(instanceName).then(visitorID => {\n      sendAnalyticsPayload({ analyticsPayload, visitorID });\n    });\n  });\n};\nconst sendEvent = ({\n  eventType,\n  viewName,\n  decisionScopes,\n  renderDecisions,\n  executedPropositions\n}) => {\n  const xdm = {\n    eventType: eventType\n  };\n\n  if (viewName) {\n    xdm.web = {\n      webPageDetails: {\n        viewName\n      }\n    };\n  }\n\n  if (executedPropositions) {\n    xdm._experience = {\n      decisioning: {\n        propositions: executedPropositions\n      }\n    };\n  }\n\n  return window[instanceName](\"sendEvent\", {\n    renderDecisions,\n    decisionScopes,\n    xdm\n  });\n};\n\nexport const getFormBasedOffer = () => {\n  sendEvent({\n    eventType: \"form-based-offer\",\n    decisionScopes: [\"a4t-test\"]\n  }).then(result => {\n    if (!result.propositions) {\n      return;\n    }\n    const analyticsPayloads = new Set();\n    const executedPropositions = [];\n\n    result.propositions.forEach(proposition => {\n      proposition.items.forEach(item => {\n        if (item.schema === HTML_SCHEMA) {\n          // apply offer\n          document.getElementById(\"form-based-offer-container\").innerHTML =\n            item.data.content;\n\n          //collect the executed proposition to send the display notification event\n          executedPropositions.push({\n            id: proposition.id,\n            scope: proposition.scope,\n            scopeDetails: proposition.scopeDetails\n          });\n\n          analyticsPayloads.add(getDisplayAnalyticsToken(proposition));\n        }\n\n        if (item.schema === MEASUREMENT_SCHEMA) {\n          // add metric to the DOM element\n          const button = document.getElementById(\"form-based-click-metric\");\n\n          button.addEventListener(\"click\", event => {\n            sendEvent({\n              eventType: \"decisioning.propositionInteract\",\n              executedPropositions: [\n                {\n                  id: proposition.id,\n                  scope: proposition.scope,\n                  scopeDetails: proposition.scopeDetails\n                }\n              ],\n              instanceName\n            });\n          });\n        }\n      });\n    });\n\n    sendEvent({\n      eventType: \"decisioning.propositionDisplay\",\n      executedPropositions,\n      instanceName\n    });\n\n    getECID(instanceName).then(visitorID => {\n      const analyticsPayload = concatenateAnalyticsPayloads(analyticsPayloads);\n      sendAnalyticsPayload({ analyticsPayload, visitorID });\n    });\n  });\n};\n","import React, { useEffect } from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport { Link, Route, Switch, useRouteMatch } from \"react-router-dom\";\nimport {\n  getFormBasedOffer,\n  personalizationEvent\n} from \"./personalizationAnalyticsClientSideHelper\";\n\nconst Products = () => {\n  personalizationEvent({ renderDecisions: true });\n  return (\n    <div>\n      <h2>Products</h2>\n      <div\n        style={{ border: \"1px solid red\" }}\n        id=\"personalization-products-container\"\n      >\n        This is the personalization placeholder for the products view.\n        Personalized content has not been loaded.\n      </div>\n    </div>\n  );\n};\n\nconst Cart = () => {\n  personalizationEvent({ renderDecisions: true });\n  return (\n    <div>\n      <h2>Cart</h2>\n      <div\n        style={{ border: \"1px solid red\" }}\n        id=\"personalization-cart-container\"\n      >\n        This is the personalization placeholder for the cart view. Personalized\n        content has not been loaded.\n      </div>\n    </div>\n  );\n};\n\nexport default function PersonalizationAnalyticsClientSide() {\n  useEffect(() => {\n    personalizationEvent({ renderDecisions: true });\n  }, []);\n\n  const match = useRouteMatch();\n\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Personalization with A4T client side logging</h1>\n      <p>\n        This page tests rendering of activities using a <i>__view__</i> scope,\n        collecting the analyticsTokens from the rendered propositions and\n        trigger a Analytics hit using Data Insertion API. Important!!! If you\n        navigated here from another sandbox view, you will probably need to\n        refresh your browser because this is how to properly simulate a non-SPA\n        workflow.\n      </p>\n      <div\n        style={{ border: \"1px solid red\" }}\n        className=\"personalization-container\"\n      >\n        This is the personalization placeholder. Personalized content has not\n        been loaded.\n      </div>\n      <div>\n        <p>To retrieve a form based composed offer click on this button:</p>\n        <button onClick={getFormBasedOffer}>\n          Get a4t-test-scope location offer\n        </button>\n\n        <div\n          style={{ border: \"1px solid red\", margin: \"10px 0 10px 0\" }}\n          id=\"form-based-offer-container\"\n        >\n          This is the personalization placeholder for a form based composed\n          offer. Personalized content has not been loaded.\n        </div>\n\n        <button\n          style={{ margin: \"10px 0 10px 0\" }}\n          id=\"form-based-click-metric\"\n        >\n          {\" \"}\n          Click me!\n        </button>\n      </div>\n      <p> This section is to simulate a SPA use case. </p>\n      <ul>\n        <li>\n          <Link to={`${match.url}/products`}>Products</Link>\n        </li>\n        <li>\n          <Link to={`${match.url}/cart`}>Cart</Link>\n        </li>\n      </ul>\n      <Switch>\n        <Route path={`${match.path}/products`}>\n          <Products />\n        </Route>\n        <Route path={`${match.path}/cart`}>\n          <Cart />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport ContentSecurityPolicy from \"./components/ContentSecurityPolicy\";\nimport useSendPageViewEvent from \"./useSendPageViewEvent\";\n\nconst SCOPES_FOR_PAGE = [\"sandbox-personalization-page2\"];\n\nconst metadata = {\n  \"sandbox-personalization-page2\": {\n    selector: \"#form-based-personalization\",\n    actionType: \"setHtml\"\n  }\n};\n\nconst usePropositions = () => {\n  const [propositions, setPropositions] = useState(undefined);\n  useSendPageViewEvent({ setPropositions, decisionScopes: SCOPES_FOR_PAGE });\n  useEffect(() => {\n    if (propositions) {\n      window.alloy(\"applyPropositions\", {\n        propositions,\n        metadata\n      });\n    }\n  });\n};\n\nconst updateComponent = ({ renderCounter, setRenderCounter }) => {\n  setRenderCounter(renderCounter + 1);\n};\n\nexport default function Personalization() {\n  const [renderCounter, setRenderCounter] = useState(0);\n  usePropositions();\n  return (\n    <div>\n      <ContentSecurityPolicy />\n      <h1>Personalization</h1>\n      <h2>Number of times rendered: {renderCounter}</h2>\n      <button\n        onClick={() => updateComponent({ renderCounter, setRenderCounter })}\n      >\n        Re-render component\n      </button>\n      <p>\n        This page tests rendering of form-based activities, which need a\n        user-provided selector and actionType in order to be properly rendered\n        for a given scope. If you navigated here from another sandbox view, you\n        will probably need to refresh your browser because this is how to\n        properly simulate a non-SPA workflow.\n      </p>\n      <div style={{ border: \"1px solid red\" }} id=\"form-based-personalization\">\n        This is a form-based personalization placeholder. Personalized content\n        has not been loaded.\n      </div>\n    </div>\n  );\n}\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport React, { useEffect, useState } from \"react\";\n\nconst useAlloyVersion = (instanceName = \"alloy\") => {\n  const [version, setVersion] = useState(\"0.0.0\");\n  useEffect(() => {\n    window[instanceName](\"getLibraryInfo\").then(\n      ({ libraryInfo: { version } }) => {\n        setVersion(version);\n      }\n    );\n  }, [instanceName]);\n  return version;\n};\n\n/**\n * Display the Alloy version in a footer in the bottom right.\n */\nexport default () => {\n  const alloyVersion = useAlloyVersion(window.__alloyNS[0]);\n  return (\n    <div\n      style={{\n        bottom: 0,\n        fontFamily: \"monospace\",\n        margin: \"4px\",\n        padding: \"0\",\n        opacity: 0.4,\n        position: \"fixed\",\n        right: 0,\n        size: \"0.8rem\",\n        userSelect: \"none\"\n      }}\n    >\n      {alloyVersion}\n    </div>\n  );\n};\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport Home from \"./Home\";\nimport Consent from \"./Consent\";\nimport Personalization from \"./Personalization\";\nimport PersonalizationSpa from \"./PersonalizationSpa\";\nimport PersonalizationProfile from \"./PersonalizationProfile\";\nimport Links from \"./Links\";\nimport EventMerge from \"./EventMerge\";\nimport LargePayload from \"./LargePayload\";\nimport OrgTwo from \"./OrgTwo\";\nimport DualTag from \"./DualTag\";\nimport RedirectOffers from \"./RedirectOffers\";\nimport RedirectedNewPage from \"./RedirectedNewPage\";\nimport PersonalizationAnalyticsClientSide from \"./PersonalizationAnalyticsClientSide\";\nimport PersonalizationFormBased from \"./PersonalizationFormBased\";\nimport Identity from \"./Identity\";\nimport AlloyVersion from \"./components/AlloyVersion\";\n\nfunction BasicExample() {\n  return (\n    <>\n      <Router>\n        <div>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n            <li>\n              <Link to=\"/consent\">Consent</Link>\n            </li>\n            <li>\n              <Link to=\"/personalization\">Personalization</Link>\n            </li>\n            <li>\n              <Link to=\"/personalizationSpa\">Personalization - SPA</Link>\n            </li>\n            <li>\n              <Link to=\"/personalizationA4TClientSide\">\n                Personalization - A4T Client Side\n              </Link>\n            </li>\n            <li>\n              <Link to=\"/personalizationProfile\">\n                Personalization - Profile\n              </Link>\n            </li>\n            <li>\n              <Link to=\"/personalizationFormBased\">\n                Personalization - Form Based\n              </Link>\n            </li>\n            <li>\n              <Link to=\"/links\">Links</Link>\n            </li>\n            <li>\n              <Link to=\"/eventMerge\">Event-Merge</Link>\n            </li>\n            <li>\n              <Link to=\"/largePayload\">Large Payload</Link>\n            </li>\n            <li>\n              <Link to=\"/orgTwo\">Multiple Orgs</Link>\n            </li>\n            <li>\n              {/* Anchor tag to ensure app is reloaded with unsafe CSP */}\n              <a href=\"/dualTag\">Dual Tag</a>\n            </li>\n            <li>\n              <a href=\"/legacy.html\">Legacy Visitor ID</a>\n            </li>\n            <li>\n              <a href=\"/redirectOffers\">Redirect Offers</a>\n            </li>\n            <li>\n              <a href=\"/identity\">Identity</a>\n            </li>\n          </ul>\n          <hr />\n\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/consent\" component={Consent} />\n          <Route path=\"/personalization\" component={Personalization} />\n          <Route path=\"/personalizationSpa\" component={PersonalizationSpa} />\n          <Route\n            path=\"/personalizationA4TClientSide\"\n            component={PersonalizationAnalyticsClientSide}\n          />\n          <Route\n            path=\"/personalizationProfile\"\n            component={PersonalizationProfile}\n          />\n          <Route\n            path=\"/personalizationFormBased\"\n            component={PersonalizationFormBased}\n          />\n          <Route path=\"/links\" component={Links} />\n          <Route path=\"/eventMerge\" component={EventMerge} />\n          <Route path=\"/largePayload\" component={LargePayload} />\n          <Route path=\"/orgTwo\" component={OrgTwo} />\n          <Route path=\"/dualTag\" component={DualTag} />\n          <Route path=\"/redirectOffers\" component={RedirectOffers} />\n          <Route path=\"/redirectedNewPage\" component={RedirectedNewPage} />\n          <Route path=\"/identity\" component={Identity} />\n        </div>\n      </Router>\n      <AlloyVersion />\n    </>\n  );\n}\n\nexport default BasicExample;\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport \"@babel/polyfill\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}