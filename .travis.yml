dist: xenial
language:
- node_js
node_js:
- 'stable'
install:
- npm i -g npm
- npm i -g testcafe
cache:
  directories:
  - node_modules
addons:
  firefox: latest
  chrome: stable
  sonarcloud:
    organization: adobeinc
before_install:
- stty cols 80
- npm install -g @lhci/cli@0.3.x
services:
- xvfb
script:
- npm install
- npm run build:prod
- npm run functional:ci
- lhci autorun --config=./lighthouserc.json
- npm run test:saucelabs
- npm run checkbundlesize

notifications:
  slack: adobedx:AlI4WB2ojGDcqsBEVZ1EGsCR
  on_success: always
  on_failure: always
  
