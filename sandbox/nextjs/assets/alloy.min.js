/**
 * Copyright 2019 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

!(function() {
  "use strict";
  if (document.documentMode && document.documentMode < 11)
    console.warn(
      "The Adobe Experience Cloud Web SDK does not support IE 10 and below."
    );
  else {
    var e = "Chrome",
      n = "Edge",
      t = "EdgeChromium",
      r = "Unknown",
      o = function(e, n) {
        return -1 !== e.indexOf(n);
      },
      i = [e, n, t, "IE", r],
      a = function(e) {
        return o(i, e);
      },
      c = Object.getOwnPropertySymbols,
      u = Object.prototype.hasOwnProperty,
      s = Object.prototype.propertyIsEnumerable,
      f = (function() {
        try {
          if (!Object.assign) return !1;
          var e = new String("abc");
          if (((e[5] = "de"), "5" === Object.getOwnPropertyNames(e)[0]))
            return !1;
          for (var n = {}, t = 0; t < 10; t++)
            n["_" + String.fromCharCode(t)] = t;
          if (
            "0123456789" !==
            Object.getOwnPropertyNames(n)
              .map(function(e) {
                return n[e];
              })
              .join("")
          )
            return !1;
          var r = {};
          return (
            "abcdefghijklmnopqrst".split("").forEach(function(e) {
              r[e] = e;
            }),
            "abcdefghijklmnopqrst" ===
              Object.keys(Object.assign({}, r)).join("")
          );
        } catch (e) {
          return !1;
        }
      })()
        ? Object.assign
        : function(e, n) {
            for (var t, r, o = vo(e), i = 1; i < arguments.length; i++) {
              for (var a in (t = Object(arguments[i])))
                u.call(t, a) && (o[a] = t[a]);
              if (c) {
                r = c(t);
                for (var f = 0; f < r.length; f++)
                  s.call(t, r[f]) && (o[r[f]] = t[r[f]]);
              }
            }
            return o;
          },
      d =
        "undefined" != typeof globalThis
          ? globalThis
          : "undefined" != typeof window
          ? window
          : "undefined" != typeof global
          ? global
          : "undefined" != typeof self
          ? self
          : {},
      l = mo(function(e, n) {
        var t;
        (t = function() {
          function e() {
            for (var e = 0, n = {}; e < arguments.length; e++) {
              var t = arguments[e];
              for (var r in t) n[r] = t[r];
            }
            return n;
          }
          function n(e) {
            return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
          }
          return (function t(r) {
            function o() {}
            function i(n, t, i) {
              if ("undefined" != typeof document) {
                "number" ==
                  typeof (i = e({ path: "/" }, o.defaults, i)).expires &&
                  (i.expires = new Date(1 * new Date() + 864e5 * i.expires)),
                  (i.expires = i.expires ? i.expires.toUTCString() : "");
                try {
                  var a = JSON.stringify(t);
                  /^[\{\[]/.test(a) && (t = a);
                } catch (e) {}
                (t = r.write
                  ? r.write(t, n)
                  : encodeURIComponent(String(t)).replace(
                      /%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,
                      decodeURIComponent
                    )),
                  (n = encodeURIComponent(String(n))
                    .replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
                    .replace(/[\(\)]/g, escape));
                var c = "";
                for (var u in i)
                  i[u] &&
                    ((c += "; " + u),
                    !0 !== i[u] && (c += "=" + i[u].split(";")[0]));
                return (document.cookie = n + "=" + t + c);
              }
            }
            function a(e, t) {
              if ("undefined" != typeof document) {
                for (
                  var o = {},
                    i = document.cookie ? document.cookie.split("; ") : [],
                    a = 0;
                  a < i.length;
                  a++
                ) {
                  var c = i[a].split("="),
                    u = c.slice(1).join("=");
                  t || '"' !== u.charAt(0) || (u = u.slice(1, -1));
                  try {
                    var s = n(c[0]);
                    if (((u = (r.read || r)(u, s) || n(u)), t))
                      try {
                        u = JSON.parse(u);
                      } catch (e) {}
                    if (((o[s] = u), e === s)) break;
                  } catch (e) {}
                }
                return e ? o[e] : o;
              }
            }
            return (
              (o.set = i),
              (o.get = function(e) {
                return a(e, !1);
              }),
              (o.getJSON = function(e) {
                return a(e, !0);
              }),
              (o.remove = function(n, t) {
                i(n, "", e(t, { expires: -1 }));
              }),
              (o.defaults = {}),
              (o.withConverter = t),
              o
            );
          })(function() {});
        }),
          (e.exports = t());
      }),
      g = { get: l.get, set: l.set, remove: l.remove },
      p = function(e) {
        return null == e;
      },
      v = function(e) {
        return !p(e) && !Array.isArray(e) && "object" === wo(e);
      },
      m = function e(n, t) {
        Object.keys(t).forEach(function(r) {
          v(n[r]) && v(t[r]) ? e(n[r], t[r]) : (n[r] = t[r]);
        });
      },
      h = function(e) {
        if (p(e))
          throw new TypeError(
            'deepAssign "target" cannot be null or undefined'
          );
        for (
          var n = Object(e),
            t = arguments.length,
            r = new Array(t > 1 ? t - 1 : 0),
            o = 1;
          o < t;
          o++
        )
          r[o - 1] = arguments[o];
        return (
          r.forEach(function(e) {
            return m(n, Object(e));
          }),
          n
        );
      },
      y = function(e, n) {
        return function(t) {
          var r = n.split(".").reduce(function(e, n) {
            return (e[n] = e[n] || {}), e[n];
          }, e);
          h(r, t);
        };
      },
      w = function() {
        var e = [];
        return {
          add: function(n) {
            e.push(n);
          },
          call: function() {
            for (var n = arguments.length, t = new Array(n), r = 0; r < n; r++)
              t[r] = arguments[r];
            return Promise.all(
              e.map(function(e) {
                return e.apply(void 0, t);
              })
            );
          }
        };
      },
      b = (function() {
        for (var e = [], n = 0; n < 256; n++) {
          for (var t = n, r = 0; r < 8; r++)
            t = 1 & t ? 3988292384 ^ (t >>> 1) : t >>> 1;
          e.push(t);
        }
        return function(n, t) {
          (n = unescape(encodeURIComponent(n))), t || (t = 0), (t ^= -1);
          for (var r = 0; r < n.length; r++) {
            var o = 255 & (t ^ n.charCodeAt(r));
            t = (t >>> 8) ^ e[o];
          }
          return (t ^= -1) >>> 0;
        };
      })(),
      C = function() {
        var e = {};
        return (
          (e.promise = new Promise(function(n, t) {
            (e.resolve = n), (e.reject = t);
          })),
          e
        );
      },
      E = function(e, n) {
        for (var t = 0; t < e.length; t += 1) {
          var r = e[t];
          if (n(r, t, e)) return r;
        }
      },
      I = function(e, n) {
        return e.appendChild(n);
      },
      R = function(e, n) {
        Object.keys(n).forEach(function(t) {
          if ("style" === t && v(n[t])) {
            var r = n[t];
            Object.keys(r).forEach(function(n) {
              e.style[n] = r[n];
            });
          } else e[t] = n[t];
        });
      },
      D = function(e) {
        var n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
          t =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          r =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [],
          o =
            arguments.length > 4 && void 0 !== arguments[4]
              ? arguments[4]
              : document,
          i = o.createElement(e);
        return (
          Object.keys(n).forEach(function(e) {
            i.setAttribute(e, n[e]);
          }),
          R(i, t),
          r.forEach(function(e) {
            return I(i, e);
          }),
          i
        );
      },
      k = "IMG",
      S = "STYLE",
      O = "SCRIPT",
      x = "src",
      q = function(e) {
        var n = e.src,
          t = e.currentDocument,
          r = void 0 === t ? document : t;
        return new Promise(function(e, t) {
          D(k, { src: n }, { onload: e, onerror: t, onabort: t }, [], r);
        });
      },
      P = function(e) {
        return "function" == typeof e;
      },
      A = function(e) {
        return Array.isArray(e) && e.length > 0;
      },
      j = function(e) {
        return Array.isArray(e) ? e : null == e ? [] : [].slice.call(e);
      },
      M = function(e) {
        var n =
          arguments.length > 1 && void 0 !== arguments[1]
            ? arguments[1]
            : document;
        return j(n.querySelectorAll(e));
      },
      N = { childList: !0, subtree: !0 },
      T = function(e) {
        return new Error("Could not find: " + e);
      },
      U = function(e) {
        return new Promise(e);
      },
      B = function(e) {
        return P(e.MutationObserver);
      },
      F = function(e, n, t, r, o) {
        return U(function(i, a) {
          var c = new e.MutationObserver(function() {
            var e = o(t);
            A(e) && (c.disconnect(), i(e));
          });
          setTimeout(function() {
            c.disconnect(), a(T(t));
          }, r),
            c.observe(n, N);
        });
      },
      _ = function(e) {
        return "visible" === e.visibilityState;
      },
      V = function(e, n, t, r) {
        return U(function(o, i) {
          !(function t() {
            var i = r(n);
            A(i) ? o(i) : e.requestAnimationFrame(t);
          })(),
            setTimeout(function() {
              i(T(n));
            }, t);
        });
      },
      H = function(e, n, t) {
        return U(function(r, o) {
          !(function n() {
            var o = t(e);
            A(o) ? r(o) : setTimeout(n, 100);
          })(),
            setTimeout(function() {
              o(T(e));
            }, n);
        });
      },
      L = function(e) {
        var n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : M,
          t =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : 5e3,
          r =
            arguments.length > 3 && void 0 !== arguments[3]
              ? arguments[3]
              : window,
          o =
            arguments.length > 4 && void 0 !== arguments[4]
              ? arguments[4]
              : document,
          i = n(e);
        return A(i)
          ? Promise.resolve(i)
          : B(r)
          ? F(r, o, e, t, n)
          : _(o)
          ? V(r, e, t, n)
          : H(e, t, n);
      },
      z = function(e) {
        var n = e.parentNode;
        return n ? n.removeChild(e) : null;
      },
      J = q,
      W = { name: "Adobe Alloy" },
      X = { style: { display: "none", width: 0, height: 0 } },
      Q = function(e) {
        var n = e.hideReferrer,
          t = e.url;
        return n
          ? (function(e) {
              var n = e.src;
              return L("BODY")
                .then(function(e) {
                  var n = Eo(e, 1)[0],
                    t = D("IFRAME", W, X);
                  return I(n, t);
                })
                .then(function(e) {
                  var t = e.contentWindow.document;
                  return q({ src: n, currentDocument: t }).then(function() {
                    z(e);
                  });
                });
            })({ src: t })
          : J({ src: t });
      },
      $ = function(e, n) {
        return Array.prototype.concat.apply([], e.map(n));
      },
      G = "com.adobe.alloy.",
      K = G + "getTld",
      Y = function(e, n) {
        for (
          var t,
            r,
            o = "",
            i = e.location.hostname.toLowerCase().split("."),
            a = 1;
          a < i.length && !n.get(K);

        )
          (o = ((t = i), (r = a += 1), t.slice(-r)).join(".")),
            n.set(K, K, { domain: o });
        return n.remove(K, { domain: o }), o;
      },
      Z = function(e) {
        return e.replace("@", "_");
      },
      ee = function(e, n) {
        return "kndctr_" + Z(e) + "_" + n;
      },
      ne = function(e) {
        var n = e.orgId,
          t = ee(n, "identity");
        return function() {
          return Boolean(g.get(t));
        };
      },
      te = function(e, n, t) {
        return {
          getItem: function(r) {
            try {
              return e[n].getItem(t + r);
            } catch (e) {
              return null;
            }
          },
          setItem: function(r, o) {
            try {
              return e[n].setItem(t + r, o), !0;
            } catch (e) {
              return !1;
            }
          },
          clear: function() {
            try {
              return (
                Object.keys(e[n]).forEach(function(r) {
                  var o;
                  (o = t), r.substr(0, o.length) === o && e[n].removeItem(r);
                }),
                !0
              );
            } catch (e) {
              return !1;
            }
          }
        };
      },
      re = function(e, n) {
        return e.filter(function(e) {
          return o(n, e);
        });
      },
      oe = function(e) {
        return v(e) && 0 === Object.keys(e).length;
      },
      ie = function(e) {
        return "number" == typeof e && !isNaN(e);
      },
      ae = function(e) {
        var n = parseInt(e, 10);
        return ie(n) && e === n;
      },
      ce = function(e) {
        return "string" == typeof e;
      },
      ue = function(e) {
        return ce(e) && e.length > 0;
      },
      se = function() {},
      fe = function(e, n, t) {
        var r = String(e),
          o = String(t);
        if (r.length >= n || 0 === o.length) return r;
        for (var i = n - r.length; i > o.length; ) o += o;
        return o.slice(0, i) + r;
      },
      de = function(e, n, t, r) {
        (n = n || "&"), (t = t || "=");
        var o = {};
        if ("string" != typeof e || 0 === e.length) return o;
        var i = /\+/g;
        e = e.split(n);
        var a = 1e3;
        r && "number" == typeof r.maxKeys && (a = r.maxKeys);
        var c = e.length;
        a > 0 && c > a && (c = a);
        for (var u = 0; u < c; ++u) {
          var s,
            f,
            d,
            l,
            g = e[u].replace(i, "%20"),
            p = g.indexOf(t);
          p >= 0
            ? ((s = g.substr(0, p)), (f = g.substr(p + 1)))
            : ((s = g), (f = "")),
            (d = decodeURIComponent(s)),
            (l = decodeURIComponent(f)),
            ko(o, d)
              ? Array.isArray(o[d])
                ? o[d].push(l)
                : (o[d] = [o[d], l])
              : (o[d] = l);
        }
        return o;
      },
      le = function(e) {
        switch (wo(e)) {
          case "string":
            return e;
          case "boolean":
            return e ? "true" : "false";
          case "number":
            return isFinite(e) ? e : "";
          default:
            return "";
        }
      },
      ge = function(e, n, t, r) {
        return (
          (n = n || "&"),
          (t = t || "="),
          null === e && (e = void 0),
          "object" === wo(e)
            ? Object.keys(e)
                .map(function(r) {
                  var o = encodeURIComponent(le(r)) + t;
                  return Array.isArray(e[r])
                    ? e[r]
                        .map(function(e) {
                          return o + encodeURIComponent(le(e));
                        })
                        .join(n)
                    : o + encodeURIComponent(le(e[r]));
                })
                .join(n)
            : r
            ? encodeURIComponent(le(r)) + t + encodeURIComponent(le(e))
            : ""
        );
      },
      pe = mo(function(e, n) {
        (n.decode = n.parse = de), (n.encode = n.stringify = ge);
      });
    pe.decode, pe.parse, pe.encode, pe.stringify;
    for (
      var ve = function(e) {
          return (
            "string" == typeof e && (e = e.trim().replace(/^[?#&]/, "")),
            pe.parse(e)
          );
        },
        me = function(e) {
          return e instanceof Error ? e : new Error(e);
        },
        he = function(e) {
          var n = e.error,
            t = e.message;
          try {
            n.message = t;
          } catch (e) {}
        },
        ye = function(e) {
          var n = e.error,
            t = e.message,
            r = me(n),
            o = t + "\nCaused by: " + r.message;
          return he({ error: r, message: o }), r;
        },
        we = function(e) {
          var n = e.getFullYear(),
            t = fe(e.getMonth() + 1, 2, "0"),
            r = fe(e.getDate(), 2, "0"),
            o = fe(e.getHours(), 2, "0"),
            i = fe(e.getMinutes(), 2, "0"),
            a = fe(e.getSeconds(), 2, "0"),
            c = fe(e.getMilliseconds(), 3, "0"),
            u = e.getTimezoneOffset();
          return (
            n +
            "-" +
            t +
            "-" +
            r +
            "T" +
            o +
            ":" +
            i +
            ":" +
            a +
            "." +
            c +
            (u > 0 ? "-" : "+") +
            fe(Math.floor(Math.abs(u) / 60), 2, "0") +
            ":" +
            fe(Math.abs(u) % 60, 2, "0")
          );
        },
        be = mo(function(e) {
          var n =
            ("undefined" != typeof crypto &&
              crypto.getRandomValues &&
              crypto.getRandomValues.bind(crypto)) ||
            ("undefined" != typeof msCrypto &&
              "function" == typeof window.msCrypto.getRandomValues &&
              msCrypto.getRandomValues.bind(msCrypto));
          if (n) {
            var t = new Uint8Array(16);
            e.exports = function() {
              return n(t), t;
            };
          } else {
            var r = new Array(16);
            e.exports = function() {
              for (var e, n = 0; n < 16; n++)
                0 == (3 & n) && (e = 4294967296 * Math.random()),
                  (r[n] = (e >>> ((3 & n) << 3)) & 255);
              return r;
            };
          }
        }),
        Ce = [],
        Ee = 0;
      Ee < 256;
      ++Ee
    )
      Ce[Ee] = (Ee + 256).toString(16).substr(1);
    var Ie = function(e, n) {
        var t = n || 0,
          r = Ce;
        return [
          r[e[t++]],
          r[e[t++]],
          r[e[t++]],
          r[e[t++]],
          "-",
          r[e[t++]],
          r[e[t++]],
          "-",
          r[e[t++]],
          r[e[t++]],
          "-",
          r[e[t++]],
          r[e[t++]],
          "-",
          r[e[t++]],
          r[e[t++]],
          r[e[t++]],
          r[e[t++]],
          r[e[t++]],
          r[e[t++]]
        ].join("");
      },
      Re = function(e, n, t) {
        var r = (n && t) || 0;
        "string" == typeof e &&
          ((n = "binary" === e ? new Array(16) : null), (e = null));
        var o = (e = e || {}).random || (e.rng || be)();
        if (((o[6] = (15 & o[6]) | 64), (o[8] = (63 & o[8]) | 128), n))
          for (var i = 0; i < 16; ++i) n[r + i] = o[i];
        return n || Ie(o);
      },
      De = function(e, n) {
        var t =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          r = function(t, r) {
            return n(e(t, r), r);
          };
        return f(r, e, t), r;
      },
      ke = function(e, n, t) {
        return De(
          e,
          function(e, t) {
            return null == e ? e : n(e, t);
          },
          t
        );
      },
      Se = function(e, n, t, r) {
        if (!e)
          throw new Error(
            "'" +
              t +
              "': Expected " +
              r +
              ", but got " +
              JSON.stringify(n) +
              "."
          );
      },
      Oe = function(e, n) {
        return (
          Se(
            (function(e) {
              return "boolean" == typeof e;
            })(e),
            e,
            n,
            "true or false"
          ),
          e
        );
      },
      xe = function(e, n) {
        return Se(P(e), e, n, "a function"), e;
      },
      qe = function(e, n) {
        return function(t, r) {
          return Se(t >= n, t, r, e + " greater than or equal to " + n), t;
        };
      },
      Pe = function(e) {
        return function(n, t) {
          return v(n) ? Se(!oe(n), n, t, e) : Se(n.length > 0, n, t, e), n;
        };
      },
      Ae = /^[a-z0-9.-]{1,}$/i,
      je = function(e, n) {
        return Se(Ae.test(e), e, n, "a valid domain"), e;
      },
      Me = function(e, n) {
        return Se(ae(e), e, n, "an integer"), e;
      },
      Ne = function(e, n) {
        return Se(ie(e), e, n, "a number"), e;
      },
      Te = function(e, n) {
        return (
          Se(
            (function(e) {
              try {
                return null !== new RegExp(e);
              } catch (e) {
                return !1;
              }
            })(e),
            e,
            n,
            "a regular expression"
          ),
          e
        );
      },
      Ue = function(e, n) {
        if (null == e) throw new Error("'" + n + "' is a required option");
        return e;
      },
      Be = function(e, n) {
        return Se(ce(e), e, n, "a string"), e;
      },
      Fe = function(e) {
        return e;
      };
    (Fe.default = function(e) {
      return De(
        this,
        (function(e) {
          return function(n) {
            return null == n ? e : n;
          };
        })(e)
      );
    }),
      (Fe.required = function() {
        return De(this, Ue);
      });
    var _e = function() {
        return ke(this, je);
      },
      Ve = function(e) {
        return ke(this, qe("an integer", e));
      },
      He = function(e) {
        return ke(this, qe("a number", e));
      },
      Le = function() {
        return ke(this, Me, { minimum: Ve });
      },
      ze = function() {
        return ke(this, Pe("a non-empty string"));
      },
      Je = function() {
        return ke(this, Pe("a non-empty array"));
      },
      We = function() {
        return ke(this, Pe("a non-empty object"));
      },
      Xe = function() {
        return ke(this, Te);
      },
      Qe = function() {
        return ke(
          this,
          (function() {
            var e = [];
            return function(n, t) {
              return (
                Se(
                  -1 === e.indexOf(n),
                  n,
                  t,
                  "a unique value across instances"
                ),
                e.push(n),
                n
              );
            };
          })()
        );
      },
      $e = function(e, n) {
        return De(
          this,
          (function(e, n) {
            return function(t, r) {
              var o = E(e, function(e) {
                try {
                  return e(t, r), !0;
                } catch (e) {
                  return !1;
                }
              });
              return Se(o, t, r, n), t;
            };
          })(e, n)
        );
      }.bind(Fe),
      Ge = function() {
        return ke(this, Fe);
      }.bind(Fe),
      Ke = function(e) {
        return ke(
          this,
          (function(e) {
            return function(n, t) {
              Se(Array.isArray(n), n, t, "an array");
              var r = [],
                o = n.map(function(n, o) {
                  try {
                    return e(n, t + "[" + o + "]");
                  } catch (e) {
                    return void r.push(e.message);
                  }
                });
              if (r.length) throw new Error(r.join("\n"));
              return o;
            };
          })(e),
          { nonEmpty: Je }
        );
      }.bind(Fe),
      Ye = function() {
        return ke(this, Oe);
      }.bind(Fe),
      Ze = function() {
        return ke(this, xe);
      }.bind(Fe),
      en = function(e) {
        return ke(
          this,
          (function(e) {
            return function(n, t) {
              return Se(n === e, n, t, "" + e), n;
            };
          })(e)
        );
      }.bind(Fe);
    (function() {
      return ke(this, Ne, { minimum: He, integer: Le, unique: Qe });
    }.bind(Fe));
    var nn = function(e) {
        return ke(
          this,
          ((n = e),
          function(e, t) {
            Se(v(e), e, t, "an object");
            var r = [],
              o = {};
            if (
              (Object.keys(e).forEach(function(i) {
                var a = e[i],
                  c = t ? t + "." + i : i;
                try {
                  var u = n(a, c);
                  void 0 !== u && (o[i] = u);
                } catch (e) {
                  r.push(e.message);
                }
              }),
              r.length)
            )
              throw new Error(r.join("\n"));
            return o;
          }),
          { nonEmpty: We }
        );
        var n;
      }.bind(Fe),
      tn = function(e) {
        return ke(
          this,
          (function(e) {
            return function(n, t) {
              Se(v(n), n, t, "an object");
              var r = [],
                o = {};
              if (
                (Object.keys(e).forEach(function(i) {
                  var a = n[i],
                    c = e[i],
                    u = t ? t + "." + i : i;
                  try {
                    var s = c(a, u);
                    void 0 !== s && (o[i] = s);
                  } catch (e) {
                    r.push(e.message);
                  }
                }),
                Object.keys(n).forEach(function(e) {
                  Object.prototype.hasOwnProperty.call(o, e) || (o[e] = n[e]);
                }),
                r.length)
              )
                throw new Error(r.join("\n"));
              return o;
            };
          })(e),
          {
            noUnknownFields: function() {
              return ke(
                this,
                (function(e) {
                  return function(n, t) {
                    var r = [];
                    if (
                      (Object.keys(n).forEach(function(n) {
                        if (!e[n]) {
                          var o = t ? t + "." + n : n;
                          r.push("'" + o + "': Unknown field.");
                        }
                      }),
                      r.length)
                    )
                      throw new Error(r.join("\n"));
                    return n;
                  };
                })(e)
              );
            },
            nonEmpty: We
          }
        );
      }.bind(Fe),
      rn = function() {
        return ke(this, Be, {
          regexp: Xe,
          domain: _e,
          nonEmpty: ze,
          unique: Qe
        });
      }.bind(Fe),
      on = function() {
        for (var e = arguments.length, n = new Array(e), t = 0; t < e; t++)
          n[t] = arguments[t];
        return $e(
          n.map(en),
          "one of these values: [" + JSON.stringify(n) + "]"
        );
      },
      an = nn(
        Ke(
          tn({
            authenticatedState: on("ambiguous", "authenticated", "loggedOut"),
            id: rn(),
            namespace: tn({ code: rn() }).noUnknownFields(),
            primary: Ye(),
            xid: rn()
          })
        ).required()
      ),
      cn = function(e) {
        var n,
          t = e.console,
          r = e.locationSearch,
          o = e.createLogger,
          i = e.instanceName,
          a = e.createNamespacedStorage,
          c = e.getMonitors,
          u = ve(r),
          s = a("instance." + i + "."),
          f = s.session.getItem("debug"),
          d = "true" === f,
          l = null === f,
          g = function() {
            return d;
          },
          p = function(e, n) {
            var t = n.fromConfig;
            (t && !l) || (d = e),
              t || (s.session.setItem("debug", e.toString()), (l = !1));
          };
        return (
          void 0 !== u.alloy_debug &&
            p(((n = u.alloy_debug), ce(n) && "true" === n.toLowerCase()), {
              fromConfig: !1
            }),
          {
            setDebugEnabled: p,
            logger: o({
              getDebugEnabled: g,
              context: { instanceName: i },
              getMonitors: c,
              console: t
            }),
            createComponentLogger: function(e) {
              return o({
                getDebugEnabled: g,
                context: { instanceName: i, componentName: e },
                getMonitors: c,
                console: t
              });
            }
          }
        );
      },
      un = [
        "onComponentsRegistered",
        "onBeforeEvent",
        "onBeforeRequest",
        "onResponse",
        "onRequestFailure",
        "onClick"
      ],
      sn = function(e) {
        return un.reduce(function(n, t) {
          var r;
          return (
            (n[t] =
              ((r = (function(e, n) {
                return function() {
                  for (
                    var t = arguments.length, r = new Array(t), o = 0;
                    o < t;
                    o++
                  )
                    r[o] = arguments[o];
                  return Promise.all(
                    e.getLifecycleCallbacks(n).map(function(e) {
                      return new Promise(function(n) {
                        n(e.apply(void 0, r));
                      });
                    })
                  );
                };
              })(e, t)),
              function() {
                for (
                  var e = arguments.length, n = new Array(e), t = 0;
                  t < e;
                  t++
                )
                  n[t] = arguments[t];
                return Promise.resolve().then(function() {
                  return r.apply(void 0, n);
                });
              })),
            n
          );
        }, {});
      },
      fn = function(e, n) {
        return function() {
          var t;
          try {
            t = e.apply(void 0, arguments);
          } catch (e) {
            throw ye({ error: e, message: n });
          }
          return (
            t instanceof Promise &&
              (t = t.catch(function(e) {
                throw ye({ error: e, message: n });
              })),
            t
          );
        };
      },
      dn = function() {
        var e = {},
          n = {};
        return {
          register: function(t, r) {
            var o = r.commands,
              i = r.lifecycle;
            !(function(n) {
              var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {},
                r = re(Object.keys(e), Object.keys(t));
              if (r.length)
                throw new Error(
                  "[ComponentRegistry] Could not register " +
                    n +
                    " because it has existing command(s): " +
                    r.join(",")
                );
              Object.keys(t).forEach(function(r) {
                var o = t[r];
                (o.commandName = r),
                  (o.run = fn(
                    o.run,
                    "[" +
                      n +
                      "] An error occurred while executing the " +
                      r +
                      " command."
                  )),
                  (e[r] = o);
              });
            })(t, o),
              (function(e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
                Object.keys(t).forEach(function(r) {
                  (n[r] = n[r] || []),
                    n[r].push(
                      fn(
                        t[r],
                        "[" +
                          e +
                          "] An error occurred while executing the " +
                          r +
                          " lifecycle hook."
                      )
                    );
                });
              })(t, i);
          },
          getCommand: function(n) {
            return e[n];
          },
          getCommandNames: function() {
            return Object.keys(e);
          },
          getLifecycleCallbacks: function(e) {
            return n[e] || [];
          }
        };
      },
      ln = "in",
      gn = "pending",
      pn = "general",
      vn = "declinedConsent",
      mn = "default",
      hn = "initial",
      yn = "new",
      wn = function(e) {
        var n = new Error(e);
        return (n.code = vn), (n.message = e), n;
      },
      bn = function(e) {
        var n = e.logger,
          t = [],
          r = function() {
            return Promise.resolve();
          },
          o = function() {
            return Promise.resolve();
          },
          i = function() {
            return Promise.reject(wn("No consent preferences have been set."));
          },
          a = function() {
            return Promise.reject(wn("The user declined consent."));
          },
          c = function() {
            var e = C();
            return t.push(e), e.promise;
          };
        return {
          in: function(e) {
            e === mn
              ? (this.awaitConsent = r)
              : (e === hn
                  ? n.info(
                      "Loaded user consent preferences. The user previously consented."
                    )
                  : e === yn &&
                    this.awaitConsent !== o &&
                    n.info("User consented."),
                (function() {
                  for (; t.length; ) t.shift().resolve();
                })(),
                (this.awaitConsent = o));
          },
          out: function(e) {
            e === mn
              ? (n.warn(
                  "User consent preferences not found. Default consent of out will be used."
                ),
                (this.awaitConsent = i))
              : (e === hn
                  ? n.warn(
                      "Loaded user consent preferences. The user previously declined consent."
                    )
                  : e === yn &&
                    this.awaitConsent !== a &&
                    n.warn("User declined consent."),
                (function() {
                  for (; t.length; )
                    t.shift().reject(wn("The user declined consent."));
                })(),
                (this.awaitConsent = a));
          },
          pending: function(e) {
            e === mn &&
              n.info(
                "User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."
              ),
              (this.awaitConsent = c);
          },
          awaitConsent: function() {
            return Promise.reject(
              new Error("Consent has not been initialized.")
            );
          }
        };
      },
      Cn = function() {
        var e,
          n,
          t = {},
          r = !1,
          o = !1,
          i = !0,
          a = function(e) {
            if (o)
              throw new Error(
                e + " cannot be called after event is finalized."
              );
          },
          c = {
            setUserXdm: function(n) {
              a("setUserXdm"), (e = n);
            },
            setUserData: function(e) {
              a("setUserData"), (n = e);
            },
            mergeXdm: function(e) {
              a("mergeXdm"), e && h(t, { xdm: e });
            },
            mergeMeta: function(e) {
              a("mergeMeta"), e && h(t, { meta: e });
            },
            mergeQuery: function(e) {
              a("mergeQuery"), e && h(t, { query: e });
            },
            documentMayUnload: function() {
              r = !0;
            },
            finalize: function(r) {
              if (!o && (e && c.mergeXdm(e), n && (t.data = n), (o = !0), r)) {
                i = !1;
                var a = { xdm: t.xdm || {}, data: t.data || {} },
                  u = r(a);
                (i = !1 !== u),
                  (t.xdm = a.xdm || {}),
                  (t.data = a.data || {}),
                  oe(t.xdm) && delete t.xdm,
                  oe(t.data) && delete t.data;
              }
            },
            getDocumentMayUnload: function() {
              return r;
            },
            isEmpty: function() {
              return oe(t) && (!e || oe(e)) && (!n || oe(n));
            },
            shouldSend: function() {
              return i;
            },
            getViewName: function() {
              if (e && e.web && e.web.webPageDetails)
                return e.web.webPageDetails.viewName;
            },
            toJSON: function() {
              if (!o) throw new Error("toJSON called before finalize");
              return t;
            }
          };
        return c;
      },
      En = { CONFIGURE: "configure", SET_DEBUG: "setDebug" },
      In = function(e) {
        var n,
          t = e.logger,
          r = e.configureCommand,
          o = e.setDebugCommand,
          i = e.handleError,
          a = e.validateCommandOptions,
          c = function(e, i) {
            var c;
            if (e === En.CONFIGURE) {
              if (n)
                throw new Error(
                  "The library has already been configured and may only be configured once."
                );
              c = function() {
                return (n = r(i)).then(function() {});
              };
            } else {
              if (!n)
                throw new Error(
                  "The library must be configured first. Please do so by executing the configure command."
                );
              c =
                e === En.SET_DEBUG
                  ? function() {
                      return o(i);
                    }
                  : function() {
                      return n.then(
                        function(n) {
                          var t,
                            r = n.getCommand(e);
                          if (!r || !P(r.run)) {
                            var o = ((t = En),
                            Object.keys(t).map(function(e) {
                              return t[e];
                            }))
                              .concat(n.getCommandNames())
                              .join(", ");
                            throw new Error(
                              "The " +
                                e +
                                " command does not exist. List of available commands: " +
                                o +
                                "."
                            );
                          }
                          var c = a({ command: r, options: i });
                          return r.run(c);
                        },
                        function() {
                          return (
                            t.warn(
                              "An error during configuration is preventing the " +
                                e +
                                " command from executing."
                            ),
                            new Promise(function() {})
                          );
                        }
                      );
                    };
            }
            return c;
          };
        return function(e) {
          var n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          return new Promise(function(r) {
            var o = c(e, n);
            t.logOnBeforeCommand({ commandName: e, options: n }), r(o());
          })
            .catch(function(n) {
              return i(n, e + " command");
            })
            .catch(function(r) {
              throw (t.logOnCommandRejected({
                commandName: e,
                options: n,
                error: r
              }),
              r);
            })
            .then(function(r) {
              var o = v(r) ? r : {};
              return (
                t.logOnCommandResolved({
                  commandName: e,
                  options: n,
                  result: o
                }),
                o
              );
            });
        };
      },
      Rn = function(e) {
        var n = e.command,
          t = e.options,
          r = n.commandName,
          o = n.documentationUri,
          i = void 0 === o ? "https://adobe.ly/2UH0qO7" : o,
          a = n.optionsValidator,
          c = t;
        if (a)
          try {
            c = a(t);
          } catch (e) {
            throw new Error(
              "Invalid " +
                r +
                " command options:\n\t - " +
                e +
                " For command documentation see: " +
                i
            );
          }
        return c;
      },
      Dn = function(e) {
        var n = e.eventManager,
          t = e.logger;
        return {
          commands: {
            sendEvent: {
              documentationUri: "https://adobe.ly/2r0uUjh",
              optionsValidator: function(e) {
                return (function(e) {
                  var n = e.options,
                    t = e.logger,
                    r = tn({
                      type: rn(),
                      xdm: tn({ eventType: rn(), identityMap: an }),
                      data: tn({}),
                      renderDecisions: Ye(),
                      decisionScopes: Ke(rn()),
                      datasetId: rn()
                    }).required()(n),
                    o = r.type,
                    i = r.xdm;
                  return (
                    !i ||
                      i.eventType ||
                      o ||
                      t.warn("No type or xdm.eventType specified."),
                    r
                  );
                })({ options: e, logger: t });
              },
              run: function(e) {
                var t = e.xdm,
                  r = e.data,
                  o = e.documentUnloading,
                  i = void 0 !== o && o,
                  a = e.type,
                  c = e.mergeId,
                  u = e.renderDecisions,
                  s = void 0 !== u && u,
                  f = e.decisionScopes,
                  d = void 0 === f ? [] : f,
                  l = e.datasetId,
                  g = n.createEvent();
                return (
                  i && g.documentMayUnload(),
                  g.setUserXdm(t),
                  g.setUserData(r),
                  a && g.mergeXdm({ eventType: a }),
                  c && g.mergeXdm({ eventMergeId: c }),
                  l && g.mergeMeta({ collect: { datasetId: l } }),
                  n.sendEvent(g, { renderDecisions: s, decisionScopes: d })
                );
              }
            }
          }
        };
      };
    (Dn.namespace = "DataCollector"), (Dn.configValidators = {});
    var kn = function(e) {
        var n = e.config,
          t = e.eventManager,
          r = e.lifecycle,
          o = e.handleError;
        if (n.clickCollectionEnabled) {
          var i = (function(e) {
            var n = e.eventManager,
              t = e.lifecycle,
              r = e.handleError;
            return function(e) {
              var o = e.target,
                i = n.createEvent();
              return t
                .onClick({ event: i, clickedElement: o })
                .then(function() {
                  return i.isEmpty() ? Promise.resolve() : n.sendEvent(i);
                })
                .then(se)
                .catch(function(e) {
                  r(e, "click collection");
                });
            };
          })({ eventManager: t, lifecycle: r, handleError: o });
          document.addEventListener("click", i, !0);
        }
      },
      Sn = {
        clickCollectionEnabled: Ye().default(!0),
        downloadLinkQualifier: rn()
          .regexp()
          .default(
            "\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$"
          )
      },
      On = function(e, n, t, r) {
        var o = "other";
        return (
          !(function(e, n, t) {
            var r = new RegExp(e);
            return !!t.download || r.test(n.toLowerCase());
          })(n.downloadLinkQualifier, t, r)
            ? (function(e, n) {
                var t = e.location.hostname.toLowerCase();
                return !(n.toLowerCase().indexOf(t) >= 0);
              })(e, t) && (o = "exit")
            : (o = "download"),
          o
        );
      },
      xn = function(e) {
        var n = e.config,
          t = e.eventManager,
          r = e.handleError,
          o = (function(e, n) {
            return function(t, r) {
              var o = (function(e) {
                for (var n, t = e; t; ) {
                  if (
                    (n = t).href &&
                    ("A" === n.tagName || "AREA" === n.tagName) &&
                    (!n.onclick ||
                      !n.protocol ||
                      n.protocol.toLowerCase().indexOf("javascript") < 0)
                  )
                    return t;
                  t = t.parentNode;
                }
                return null;
              })(r);
              if (o) {
                var i = (function(e, n) {
                  var t = e.location,
                    r = n.href ? n.href : "",
                    o = n.protocol,
                    i = n.host;
                  if (
                    !(function(e) {
                      return e && /^[a-z0-9]+:\/\//i.test(e);
                    })(r)
                  ) {
                    o || (o = t.protocol ? t.protocol : ""),
                      (o = o ? o + "//" : ""),
                      i || (i = t.host ? t.host : "");
                    var a = "";
                    if ("/" !== r.substring(0, 1)) {
                      var c = t.pathname.lastIndexOf("/");
                      (c = c < 0 ? 0 : c), (a = t.pathname.substring(0, c));
                    }
                    r = "" + o + i + a + "/" + r;
                  }
                  return r;
                })(e, o);
                if (i) {
                  var a = On(e, n, i, o);
                  t.documentMayUnload(),
                    t.mergeXdm({
                      eventType: "web.webinteraction.linkClicks",
                      web: {
                        webInteraction: {
                          name: "Link Click",
                          type: a,
                          URL: i,
                          linkClicks: { value: 1 }
                        }
                      }
                    });
                }
              }
            };
          })(window, n);
        return {
          lifecycle: {
            onComponentsRegistered: function(e) {
              var o = e.lifecycle;
              kn({ config: n, eventManager: t, lifecycle: o, handleError: r });
            },
            onClick: function(e) {
              var n = e.event,
                t = e.clickedElement;
              o(n, t);
            }
          }
        };
      };
    (xn.namespace = "ActivityCollector"), (xn.configValidators = Sn);
    var qn,
      Pn,
      An,
      jn = function(e, n) {
        return "ID sync " + (n ? "succeeded" : "failed") + ": " + e.spec.url;
      },
      Mn = {
        thirdPartyCookiesEnabled: Ye().default(!0),
        idMigrationEnabled: Ye().default(!0)
      },
      Nn = function(e) {
        return (
          tn({ namespaces: Ke(en("ECID")).nonEmpty() }).noUnknownFields()(e),
          { namespaces: ["ECID"] }
        );
      },
      Tn = Y(window, g),
      Un = function(e) {
        var n = e.config,
          t = e.getEcidFromVisitor,
          r = n.idMigrationEnabled,
          o = "AMCV_" + n.orgId;
        return {
          getEcid: function() {
            if (r) {
              var e = (function() {
                var e = null,
                  n = g.get("s_ecid") || g.get(o);
                if (n) {
                  var t = n.match(/(^|\|)MCMID\|(\d+)($|\|)/);
                  t && (e = t[2]);
                }
                return e;
              })();
              return e ? Promise.resolve(e) : t();
            }
            return Promise.resolve();
          },
          setEcid: function(e) {
            r &&
              !g.get(o) &&
              g.set(o, "MCMID|" + e, { domain: Tn, expires: 390 });
          }
        };
      },
      Bn = function(e) {
        var n = e.logger;
        return new Promise(function(e, t) {
          if (v(window.adobe) && v(window.adobe.optIn)) {
            var r = window.adobe.optIn;
            n.info(
              "Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."
            ),
              r.fetchPermissions(function() {
                r.isApproved([r.Categories.ECID])
                  ? (n.info(
                      "Received legacy opt-in approval to let Visitor retrieve ECID from server."
                    ),
                    e())
                  : t(new Error("Legacy opt-in was declined."));
              }, !0);
          } else e();
        });
      },
      Fn = function(e) {
        var n = e.logger,
          t = e.orgId,
          r = e.awaitVisitorOptIn,
          o = (function(e) {
            var n = e.Visitor;
            return P(n) && P(n.getInstance) && n;
          })(window);
        return function() {
          return o
            ? r({ logger: n })
                .then(function() {
                  return (
                    n.info(
                      "Delaying request while using Visitor to retrieve ECID from server."
                    ),
                    new Promise(function(e) {
                      o.getInstance(t, {}).getMarketingCloudVisitorID(function(
                        t
                      ) {
                        n.info(
                          "Resuming previously delayed request that was waiting for ECID from Visitor."
                        ),
                          e(t);
                      },
                      !0);
                    })
                  );
                })
                .catch(function(e) {
                  e
                    ? n.info(
                        e.message + ", retrieving ECID from experience edge"
                      )
                    : n.info(
                        "An error occurred while obtaining the ECID from Visitor."
                      );
                })
            : Promise.resolve();
        };
      },
      _n = "ECID",
      Vn = function(e) {
        e.mergeQuery({ identity: { fetch: [_n] } });
      },
      Hn =
        ((qn = function(o) {
          var i, a;
          return (bo((i = {}), n, /Edge\/([0-9\._]+)/),
          bo(i, t, /Edg\/([0-9\.]+)/),
          bo(i, e, /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/),
          bo(i, "Firefox", /Firefox\/([0-9\.]+)(?:\s|$)/),
          bo(i, "IE", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/),
          bo(i, "Safari", /Version\/([0-9\._]+).*Safari/),
          (a = i),
          function(e) {
            for (var n = Object.keys(a), t = 0; t < n.length; t += 1) {
              var o = n[t];
              if (a[o].test(e)) return o;
            }
            return r;
          })(o.navigator.userAgent);
        }),
        (An = new Map()),
        function() {
          var e = Pn
            ? Pn.apply(void 0, arguments)
            : arguments.length <= 0
            ? void 0
            : arguments[0];
          if (An.has(e)) return An.get(e);
          var n = qn.apply(void 0, arguments);
          return An.set(e, n), n;
        }),
      Ln = function(e, n) {
        e.addIdentity(_n, { id: n });
      },
      zn = function(e) {
        var n = e.getPayloadsByType("identity:result"),
          t = E(n, function(e) {
            return e.namespace && e.namespace.code === _n;
          });
        return t ? t.id : void 0;
      },
      Jn = function(e) {
        var n = e.payload,
          t = e.getAction,
          r = e.getUseSendBeacon,
          o = Re(),
          i = !1,
          a = !1;
        return {
          getId: function() {
            return o;
          },
          getPayload: function() {
            return n;
          },
          getAction: function() {
            return t({ isIdentityEstablished: a });
          },
          getUseSendBeacon: function() {
            return r({ isIdentityEstablished: a });
          },
          getUseIdThirdPartyDomain: function() {
            return i;
          },
          setUseIdThirdPartyDomain: function() {
            i = !0;
          },
          setIsIdentityEstablished: function() {
            a = !0;
          }
        };
      },
      Wn = function(e) {
        return Jn({
          payload: e,
          getAction: function() {
            return "identity/acquire";
          },
          getUseSendBeacon: function() {
            return !1;
          }
        });
      },
      Xn = function(e) {
        var n = e.content,
          t = e.addIdentity;
        return {
          mergeState: y(n, "meta.state"),
          mergeQuery: y(n, "query"),
          addIdentity: t,
          toJSON: function() {
            return n;
          }
        };
      },
      Qn = function(e) {
        return function(n, t) {
          (e.xdm = e.xdm || {}),
            (e.xdm.identityMap = e.xdm.identityMap || {}),
            (e.xdm.identityMap[n] = e.xdm.identityMap[n] || []),
            e.xdm.identityMap[n].push(t);
        };
      },
      $n = function(e) {
        var n = { query: { identity: { fetch: e } } };
        return Xn({ content: n, addIdentity: Qn(n) });
      },
      Gn = function(e) {
        var n = e.config,
          t = e.logger,
          r = e.consent,
          o = e.sendEdgeNetworkRequest,
          i = n.orgId,
          c = n.thirdPartyCookiesEnabled,
          u = Fn({ logger: t, orgId: i, awaitVisitorOptIn: Bn }),
          s = Un({ config: n, getEcidFromVisitor: u }),
          d = ne({ orgId: i }),
          l = (function(e) {
            var n = e.sendEdgeNetworkRequest,
              t = e.createIdentityRequestPayload,
              r = e.createIdentityRequest;
            return function(e) {
              var o = t(e),
                i = r(o);
              return n({ request: i });
            };
          })({
            sendEdgeNetworkRequest: o,
            createIdentityRequestPayload: $n,
            createIdentityRequest: Wn
          }),
          g = (function(e) {
            var n = e.thirdPartyCookiesEnabled,
              t = e.areThirdPartyCookiesSupportedByDefault;
            return function(e) {
              n && t(Hn(window)) && e.setUseIdThirdPartyDomain();
            };
          })({
            thirdPartyCookiesEnabled: c,
            areThirdPartyCookiesSupportedByDefault: a
          }),
          p = (function(e) {
            var n = e.getLegacyEcid,
              t = e.addEcidToPayload;
            return function(e) {
              return n().then(function(n) {
                n && t(e, n);
              });
            };
          })({ getLegacyEcid: s.getEcid, addEcidToPayload: Ln }),
          v = (function(e) {
            var n = e.orgId,
              t = e.doesIdentityCookieExist;
            return function(e) {
              var r = e.onResponse,
                o = e.onRequestFailure;
              return new Promise(function(e, i) {
                r(function() {
                  if (!t()) {
                    var r = new Error(
                      "An identity was not set properly. Please verify that the org ID " +
                        n +
                        " configured in Alloy matches the org ID specified in the edge configuration."
                    );
                    throw (i(r), r);
                  }
                  e();
                }),
                  o(function() {
                    t()
                      ? e()
                      : i(new Error("No identity was set on response."));
                  });
              });
            };
          })({ orgId: i, doesIdentityCookieExist: d }),
          m = (function(e) {
            var n,
              t = e.doesIdentityCookieExist,
              r = e.setDomainForInitialIdentityPayload,
              o = e.addLegacyEcidToPayload,
              i = e.awaitIdentityCookie,
              a = e.logger,
              c = function(e) {
                return r(e), o(e.getPayload());
              };
            return function(e) {
              var r = e.request,
                o = e.onResponse,
                u = e.onRequestFailure;
              if (t()) return r.setIsIdentityEstablished(), Promise.resolve();
              if (n) {
                a.info("Delaying request while retrieving ECID from server.");
                var s = n;
                return (
                  (n = s.catch(function() {
                    return i({ onResponse: o, onRequestFailure: u });
                  })),
                  s
                    .then(function() {
                      a.info("Resuming previously delayed request."),
                        r.setIsIdentityEstablished();
                    })
                    .catch(function() {
                      return c(r);
                    })
                );
              }
              return (n = i({ onResponse: o, onRequestFailure: u })), c(r);
            };
          })({
            doesIdentityCookieExist: d,
            setDomainForInitialIdentityPayload: g,
            addLegacyEcidToPayload: p,
            awaitIdentityCookie: v,
            logger: t
          }),
          h = (function(e) {
            var n = e.processIdSyncs;
            return function(e) {
              return n(e.getPayloadsByType("identity:exchange"));
            };
          })({
            processIdSyncs: (function(e) {
              var n = e.fireReferrerHideableImage,
                t = e.logger;
              return function(e) {
                var r = e.filter(function(e) {
                  return "url" === e.type;
                });
                return r.length
                  ? Promise.all(
                      r.map(function(e) {
                        return n(e.spec)
                          .then(function() {
                            t.info(jn(e, !0));
                          })
                          .catch(function() {
                            t.error(jn(e, !1));
                          });
                      })
                    ).then(se)
                  : Promise.resolve();
              };
            })({ fireReferrerHideableImage: Q, logger: t })
          });
        return (function(e) {
          var n,
            t = e.addEcidQueryToPayload,
            r = e.ensureSingleIdentity,
            o = e.setLegacyEcid,
            i = e.handleResponseForIdSyncs,
            a = e.getEcidFromResponse,
            c = e.getIdentity,
            u = e.consent,
            s = {};
          return {
            lifecycle: {
              onBeforeRequest: function(e) {
                var n = e.request,
                  o = e.onResponse,
                  i = e.onRequestFailure;
                return (
                  t(n.getPayload()),
                  r({ request: n, onResponse: o, onRequestFailure: i })
                );
              },
              onResponse: function(e) {
                var t = e.response;
                return n || ((n = a(t)) && o(n)), (s = f(s, t.getEdge())), i(t);
              }
            },
            commands: {
              getIdentity: {
                optionsValidator: Nn,
                run: function(e) {
                  return u
                    .awaitConsent()
                    .then(function() {
                      return n ? void 0 : c(e.namespaces);
                    })
                    .then(function() {
                      return { identity: { ECID: n }, edge: s };
                    });
                }
              }
            }
          };
        })({
          ensureSingleIdentity: m,
          addEcidQueryToPayload: Vn,
          setLegacyEcid: s.setEcid,
          handleResponseForIdSyncs: h,
          getEcidFromResponse: zn,
          getIdentity: l,
          consent: r
        });
      };
    (Gn.namespace = "Identity"), (Gn.configValidators = Mn);
    var Kn = function(e, n) {
        return (
          "URL destination " + (n ? "succeeded" : "failed") + ": " + e.spec.url
        );
      },
      Yn = function(e) {
        var n = e.fireReferrerHideableImage,
          t = e.logger;
        return function(e) {
          return (
            (function(e) {
              e.filter(function(e) {
                return "cookie" === e.type;
              }).forEach(function(e) {
                var n = e.spec,
                  t = n.name,
                  r = n.value,
                  o = n.domain,
                  i = n.ttlDays;
                g.set(t, r || "", { domain: o || "", expires: i || 10 });
              });
            })(e),
            (function(e, n, t) {
              var r = t.filter(function(e) {
                return "url" === e.type;
              });
              return Promise.all(
                r.map(function(t) {
                  return e(t.spec)
                    .then(function() {
                      n.info(Kn(t, !0));
                    })
                    .catch(function() {
                      n.error(Kn(t, !1));
                    });
                })
              ).then(se);
            })(n, t, e)
          );
        };
      },
      Zn = function(e) {
        var n = e.logger,
          t = Yn({ fireReferrerHideableImage: Q, logger: n });
        return {
          lifecycle: {
            onResponse: function(e) {
              var n = e.response.getPayloadsByType("activation:push");
              return t(n);
            }
          },
          commands: {}
        };
      };
    (Zn.namespace = "Audiences"), (Zn.configValidators = {});
    var et,
      nt = "__view__",
      tt = "https://ns.adobe.com/personalization/dom-action",
      rt = "https://ns.adobe.com/personalization/redirect-item",
      ot = function(e) {
        var n = e.logger,
          t = e.fetchDataHandler,
          r = e.viewChangeHandler,
          i = e.onClickHandler,
          a = e.isAuthoringModeEnabled,
          c = e.mergeQuery,
          u = e.viewCache;
        return {
          lifecycle: {
            onBeforeEvent: function(e) {
              var i = e.event,
                s = e.renderDecisions,
                f = e.decisionScopes,
                d = void 0 === f ? [] : f,
                l = e.onResponse,
                g = void 0 === l ? se : l,
                p = e.onRequestFailure,
                v = void 0 === p ? se : p;
              if (a())
                return (
                  n.warn("Rendering is disabled for authoring mode."),
                  void c(i, { enabled: !1 })
                );
              var m = (function(e) {
                var n = e.renderDecisions,
                  t = e.decisionScopes,
                  r = e.event,
                  i = e.viewCache,
                  a = r.getViewName();
                return {
                  isRenderDecisions: function() {
                    return n;
                  },
                  getViewName: function() {
                    return a;
                  },
                  hasScopes: function() {
                    return t.length > 0;
                  },
                  hasViewName: function() {
                    return ue(a);
                  },
                  createQueryDetails: function() {
                    var e = Io(t);
                    this.isCacheInitialized() || o(e, nt) || e.push(nt);
                    var n = [
                      "https://ns.adobe.com/personalization/html-content-item",
                      "https://ns.adobe.com/personalization/json-content-item",
                      rt
                    ];
                    return (
                      o(e, nt) && n.push(tt), { schemas: n, decisionScopes: e }
                    );
                  },
                  isCacheInitialized: function() {
                    return i.isInitialized();
                  },
                  shouldFetchData: function() {
                    return this.hasScopes() || !this.isCacheInitialized();
                  },
                  shouldUseCachedData: function() {
                    return this.hasViewName() && this.isCacheInitialized();
                  }
                };
              })({
                renderDecisions: s,
                decisionScopes: d,
                event: i,
                viewCache: u
              });
              if (m.shouldFetchData()) {
                var h = C();
                return (
                  u.storeViews(h.promise),
                  void t({
                    decisionsDeferred: h,
                    personalizationDetails: m,
                    event: i,
                    onResponse: g,
                    onRequestFailure: v
                  })
                );
              }
              m.shouldUseCachedData() &&
                r({
                  personalizationDetails: m,
                  onResponse: g,
                  onRequestFailure: v
                });
            },
            onClick: function(e) {
              var n = e.event,
                t = e.clickedElement;
              i({ event: n, clickedElement: t });
            }
          }
        };
      },
      it = function(e) {
        return D("DIV", {}, { innerHTML: e });
      },
      at = mo(function(e, n) {
        var t;
        (t = d),
          (e.exports = (function(e) {
            if (e.CSS && e.CSS.escape) return e.CSS.escape;
            var n = function(e) {
              if (0 == arguments.length)
                throw new TypeError("`CSS.escape` requires an argument.");
              for (
                var n,
                  t = String(e),
                  r = t.length,
                  o = -1,
                  i = "",
                  a = t.charCodeAt(0);
                ++o < r;

              )
                0 != (n = t.charCodeAt(o))
                  ? (i +=
                      (n >= 1 && n <= 31) ||
                      127 == n ||
                      (0 == o && n >= 48 && n <= 57) ||
                      (1 == o && n >= 48 && n <= 57 && 45 == a)
                        ? "\\" + n.toString(16) + " "
                        : (0 == o && 1 == r && 45 == n) ||
                          !(
                            n >= 128 ||
                            45 == n ||
                            95 == n ||
                            (n >= 48 && n <= 57) ||
                            (n >= 65 && n <= 90) ||
                            (n >= 97 && n <= 122)
                          )
                        ? "\\" + t.charAt(o)
                        : t.charAt(o))
                  : (i += "�");
              return i;
            };
            return e.CSS || (e.CSS = {}), (e.CSS.escape = n), n;
          })(t));
      }),
      ct = /:eq\((\d+)\)/g,
      ut = function(e) {
        return -1 === e.indexOf(":eq(");
      },
      st = /(#|\.)(-?\w+)/g,
      ft = /^\s*>?\s*/,
      dt = function(e, n, t) {
        return "" + n + at(t);
      },
      lt = function(e) {
        for (
          var n = [],
            t = (function(e) {
              return e.split(ct).filter(ue);
            })(
              (function(e) {
                return e.replace(st, dt);
              })(e.trim())
            ),
            r = t.length,
            o = 0;
          o < r;

        ) {
          var i = t[o].replace(ft, "").trim(),
            a = t[o + 1];
          a ? n.push({ sel: i, eq: Number(a) }) : n.push({ sel: i }), (o += 2);
        }
        return n;
      },
      gt = function(e) {
        var n = document;
        if (ut(e)) return M(e, n);
        for (var t = lt(e), r = t.length, o = [], i = n, a = 0; a < r; ) {
          var c = t[a],
            u = c.sel,
            s = c.eq,
            f = M(u, i),
            d = f.length;
          if (0 === d) break;
          if (null != s && s > d - 1) break;
          if (a < r - 1)
            if (null == s) i = Eo(f, 1)[0];
            else i = f[s];
          a === r - 1 && (o = null == s ? f : [f[s]]), (a += 1);
        }
        return o;
      },
      pt = function(e) {
        var n =
          arguments.length > 1 && void 0 !== arguments[1]
            ? arguments[1]
            : document;
        return n.getElementById(e);
      },
      vt = function(e, n, t) {
        e.setAttribute(n, t);
      },
      mt = function(e, n) {
        return e.getAttribute(n);
      },
      ht = function(e) {
        return e.parentNode;
      },
      yt = function(e, n) {
        if (e) {
          var t = ht(e);
          t &&
            t.insertBefore(
              n,
              (function(e) {
                return e.nextElementSibling;
              })(e)
            );
        }
      },
      wt = function(e, n) {
        if (e) {
          var t = ht(e);
          t && t.insertBefore(n, e);
        }
      },
      bt = function(e) {
        var n = e.childNodes;
        return n ? j(n) : [];
      },
      Ct = function(e) {
        return e.firstElementChild;
      },
      Et = function() {
        var e =
          arguments.length > 0 && void 0 !== arguments[0]
            ? arguments[0]
            : document;
        if (void 0 === et) {
          var n = e.querySelector("[nonce]");
          et = n && (n.nonce || n.getAttribute("nonce"));
        }
        return et;
      },
      It = "alloy-prehiding",
      Rt = {},
      Dt = function(e) {
        var n = Rt[e];
        n && (z(n), delete Rt[e]);
      },
      kt = function(e) {
        if (e && !pt(It)) {
          var n = Et(),
            t = yo({ id: It }, n && { nonce: n }),
            r = D(S, t, { textContent: e });
          I(document.head, r);
        }
      },
      St = function() {
        var e = pt(It);
        e && z(e);
      },
      Ot = function(e, n) {
        e.textContent = n;
      },
      xt = function(e) {
        return D(k, { src: e });
      },
      qt = function(e) {
        M(k, e).forEach(function(e) {
          var n = mt(e, x);
          n && xt(n);
        });
      },
      Pt = function(e) {
        return (
          (function(e, n) {
            return e.tagName === n;
          })(e, S) && !mt(e, x)
        );
      },
      At = function(e) {
        var n = M(S, e),
          t = n.length,
          r = Et();
        if (r)
          for (var o = 0; o < t; o += 1) {
            var i = n[o];
            Pt(i) && (i.nonce = r);
          }
      },
      jt = setTimeout;
    (xo.prototype.catch = function(e) {
      return this.then(null, e);
    }),
      (xo.prototype.then = function(e, n) {
        var t = new this.constructor(Oo);
        return qo(this, new Mo(e, n, t)), t;
      }),
      (xo.prototype.finally = function(e) {
        var n = this.constructor;
        return this.then(
          function(t) {
            return n.resolve(e()).then(function() {
              return t;
            });
          },
          function(t) {
            return n.resolve(e()).then(function() {
              return n.reject(t);
            });
          }
        );
      }),
      (xo.all = function(e) {
        return new xo(function(n, t) {
          if (!So(e)) return t(new TypeError("Promise.all accepts an array"));
          var r = Array.prototype.slice.call(e);
          if (0 === r.length) return n([]);
          var o = r.length;
          function i(e, a) {
            try {
              if (a && ("object" === wo(a) || "function" == typeof a)) {
                var c = a.then;
                if ("function" == typeof c)
                  return void c.call(
                    a,
                    function(n) {
                      i(e, n);
                    },
                    t
                  );
              }
              (r[e] = a), 0 == --o && n(r);
            } catch (e) {
              t(e);
            }
          }
          for (var a = 0; a < r.length; a++) i(a, r[a]);
        });
      }),
      (xo.resolve = function(e) {
        return e && "object" === wo(e) && e.constructor === xo
          ? e
          : new xo(function(n) {
              n(e);
            });
      }),
      (xo.reject = function(e) {
        return new xo(function(n, t) {
          t(e);
        });
      }),
      (xo.race = function(e) {
        return new xo(function(n, t) {
          if (!So(e)) return t(new TypeError("Promise.race accepts an array"));
          for (var r = 0, o = e.length; r < o; r++) xo.resolve(e[r]).then(n, t);
        });
      }),
      (xo._immediateFn =
        ("function" == typeof setImmediate &&
          function(e) {
            setImmediate(e);
          }) ||
        function(e) {
          jt(e, 0);
        }),
      (xo._unhandledRejectionFn = function(e) {
        "undefined" != typeof console &&
          console &&
          console.warn("Possible Unhandled Promise Rejection:", e);
      });
    var Mt,
      Nt =
        ((Mt = Object.freeze({ __proto__: null, default: xo })) &&
          Mt.default) ||
        Mt,
      Tt =
        ("undefined" != typeof window && window.Promise) ||
        (void 0 !== d && d.Promise) ||
        Nt.default ||
        Nt,
      Ut = function(e) {
        var n = document.createElement("script");
        (n.src = e), (n.async = !0);
        var t = (function(e, n) {
          return new Tt(function(t, r) {
            (n.onload = function() {
              t(n);
            }),
              (n.onerror = function() {
                r(new Error("Failed to load script " + e));
              });
          });
        })(e, n);
        return document.getElementsByTagName("head")[0].appendChild(n), t;
      },
      Bt = function(e, n) {
        return !!e && e.tagName === n;
      },
      Ft = function(e) {
        return Bt(e, O) && !mt(e, x);
      },
      _t = function(e) {
        return Bt(e, O) && mt(e, x);
      },
      Vt = function(e) {
        for (
          var n = M(O, e),
            t = [],
            r = n.length,
            o = Et(),
            i = yo({}, o && { nonce: o }),
            a = 0;
          a < r;
          a += 1
        ) {
          var c = n[a];
          if (Ft(c)) {
            var u = c.textContent;
            u && t.push(D(O, i, { textContent: u }));
          }
        }
        return t;
      },
      Ht = function(e) {
        for (var n = M(O, e), t = [], r = n.length, o = 0; o < r; o += 1) {
          var i = n[o];
          if (_t(i)) {
            var a = mt(i, x);
            a && t.push(a);
          }
        }
        return t;
      },
      Lt = function(e, n, t) {
        n.forEach(function(n) {
          return t(e, n);
        });
      },
      zt = function(e) {
        return Promise.all(e.map(Ut));
      },
      Jt = function(e, n) {
        var t = it(n);
        At(t);
        var r = bt(t),
          o = Vt(t),
          i = Ht(t);
        return (
          qt(t),
          r.forEach(function(n) {
            I(e, n);
          }),
          Lt(e, o, I),
          zt(i)
        );
      },
      Wt = function(e, n) {
        !(function(e) {
          bt(e).forEach(z);
        })(e),
          Jt(e, n);
      },
      Xt = function(e, n) {
        var t = it(n);
        At(t);
        var r = bt(t),
          o = Vt(t),
          i = Ht(t),
          a = r.length - 1;
        for (qt(t); a >= 0; ) {
          var c = r[a],
            u = Ct(e);
          u ? wt(u, c) : I(e, c), (a -= 1);
        }
        return Lt(e, o, I), zt(i);
      },
      Qt = function(e, n) {
        var t = it(n);
        At(t);
        var r = bt(t),
          o = Vt(t),
          i = Ht(t);
        return (
          qt(t),
          r.forEach(function(n) {
            wt(e, n);
          }),
          Lt(e, o, wt),
          zt(i)
        );
      },
      $t = function(e, n) {
        Qt(e, n), z(e);
      },
      Gt = function(e, n) {
        var t = it(n);
        At(t);
        var r = bt(t),
          o = Vt(t),
          i = Ht(t);
        return (
          qt(t),
          r.forEach(function(n) {
            yt(e, n);
          }),
          Lt(e, o, yt),
          zt(i)
        );
      },
      Kt = function(e, n) {
        var t = n.priority,
          r = Co(n, ["priority"]);
        Object.keys(r).forEach(function(n) {
          !(function(e, n, t, r) {
            var o;
            (o = r ? n + ":" + t + " !" + r + ";" : n + ":" + t + ";"),
              (e.style.cssText += ";" + o);
          })(e, n, r[n], t);
        });
      },
      Yt = function(e, n) {
        Object.keys(n).forEach(function(t) {
          vt(e, t, n[t]);
        });
      },
      Zt = function(e, n) {
        e.tagName === k &&
          (xt(n),
          (function(e, n) {
            e.removeAttribute(n);
          })(e, x),
          vt(e, x, n));
      },
      er = function(e, n) {
        var t = n.from,
          r = n.to,
          o = (function(e) {
            var n = e.children;
            return n ? j(n) : [];
          })(e),
          i = o[t],
          a = o[r];
        i && a && (t < r ? yt(a, i) : wt(a, i));
      },
      nr = function(e) {
        return function(n) {
          var t = n.selector,
            r = n.prehidingSelector,
            o = n.content,
            i = n.meta;
          return (
            (function(e) {
              if (!Rt[e]) {
                var n = Et(),
                  t = yo({}, n && { nonce: n }),
                  r = D(S, t, { textContent: e + " { visibility: hidden }" });
                I(document.head, r), (Rt[e] = r);
              }
            })(r),
            L(t, gt)
              .then(function(n) {
                return (function(e, n, t) {
                  var r = e.map(function(e) {
                    return t(e, n);
                  });
                  return Promise.all(r);
                })(n, o, e);
              })
              .then(
                function() {
                  return Dt(r), { meta: i };
                },
                function(e) {
                  return Dt(r), { meta: i, error: e };
                }
              )
          );
        };
      },
      tr = function(e) {
        return {
          setHtml: nr(Wt),
          customCode: nr(Xt),
          setText: nr(Ot),
          setAttribute: nr(Yt),
          setImageSource: nr(Zt),
          setStyle: nr(Kt),
          move: nr(Kt),
          resize: nr(Kt),
          rearrange: nr(er),
          remove: nr(z),
          insertAfter: nr(Gt),
          insertBefore: nr(Qt),
          replaceHtml: nr($t),
          prependHtml: nr(Xt),
          appendHtml: nr(Jt),
          click: function(n) {
            return (function(e, n) {
              return (
                n({ selector: e.selector, meta: e.meta }), Promise.resolve()
              );
            })(n, e);
          }
        };
      },
      rr = function(e) {
        var n,
          t = f({}, e),
          r = t.content,
          o = t.selector;
        if (!ce((n = r)) || !n.trim()) return t;
        var i = gt(o);
        return Bt(i[0], "HEAD")
          ? ((t.type = "appendHtml"),
            (t.content = (function(e) {
              var n = it(e);
              return M("SCRIPT,LINK,STYLE", n)
                .map(function(e) {
                  return e.outerHTML;
                })
                .join("");
            })(r)),
            t)
          : t;
      },
      or = function(e, n, t) {
        if (e.enabled) {
          var r = JSON.stringify(n),
            o = t.message,
            i = t.stack,
            a =
              "Failed to execute action " +
              r +
              ". " +
              o +
              " " +
              (i ? "\n " + i : "");
          e.error(a);
        }
      },
      ir = function(e, n, t) {
        var r = e.map(function(e) {
          var r = rr(e),
            o = r.type;
          return (function(e, n, t, r) {
            var o = n[t];
            if (!o) {
              var i = new Error('DOM action "' + t + '" not found');
              throw (or(e, r[0], i), i);
            }
            return o.apply(void 0, Io(r));
          })(t, n, o, [r])
            .then(function(e) {
              return (
                (function(e, n) {
                  if (e.enabled) {
                    var t = JSON.stringify(n);
                    e.info("Action " + t + " executed.");
                  }
                })(t, r),
                e
              );
            })
            .catch(function(e) {
              throw (or(t, r, e), e);
            });
        });
        return Promise.all(r);
      },
      ar = function(e) {
        return e;
      },
      cr = function(e) {
        var n = e.modules,
          t = e.logger,
          r = e.executeActions,
          o = e.collect;
        return function(e) {
          var i = e.map(function(e) {
            var o = (function(e) {
              var n = {
                id: e.id,
                scope: e.scope,
                scopeDetails: e.scopeDetails
              };
              return e.items.map(function(e) {
                return f({}, e.data, { meta: n });
              });
            })(e);
            return r(o, n, t);
          });
          return Promise.all(i)
            .then(function(e) {
              return (function(e, n, t) {
                var r = $(t, ar),
                  o = [],
                  i = new Set();
                r.forEach(function(e) {
                  if (e)
                    if (e.error) n.warn(e);
                    else {
                      var t = e.meta;
                      i.has(t.id) || (i.add(t.id), o.push(t));
                    }
                }),
                  A(o) && e({ decisionsMeta: o });
              })(o, t, e);
            })
            .catch(function(e) {
              t.error(e);
            });
        };
      },
      ur = function(e, n) {
        if (ut(e))
          return (function(e, n) {
            return n.matches ? n.matches(e) : n.msMatchesSelector(e);
          })(e, n);
        for (var t = gt(e), r = !1, o = 0; o < t.length; o += 1)
          if (t[o] === n) {
            r = !0;
            break;
          }
        return r;
      },
      sr = function(e, n, t) {
        for (var r = document.documentElement, o = e; o && o !== r; ) {
          if (ur(n, o)) return t(n);
          o = o.parentNode;
        }
        return null;
      },
      fr = function(e, n, t) {
        for (var r = [], o = 0; o < n.length; o += 1) {
          var i = sr(e, n[o], t);
          i && r.push.apply(r, Io(i));
        }
        return r;
      },
      dr = function() {
        var e =
          arguments.length > 0 && void 0 !== arguments[0]
            ? arguments[0]
            : document;
        return -1 !== e.location.href.indexOf("adobe_authoring_enabled");
      },
      lr = function(e, n) {
        e.mergeXdm({ _experience: { decisioning: { propositions: n } } });
      },
      gr = function(e, n) {
        e.mergeQuery({ personalization: yo({}, n) });
      },
      pr = function(e) {
        var n = e.decisions,
          t = e.renderAttempted;
        return n.map(function(e) {
          return f({ renderAttempted: t }, e);
        });
      },
      vr = function(e, n) {
        return {
          id: e.id,
          scope: e.scope,
          items: n,
          scopeDetails: e.scopeDetails
        };
      },
      mr = function(e, n) {
        var t = [],
          r = [];
        return (
          e.forEach(function(e) {
            var o = e.items,
              i = Eo(
                (function(e, n) {
                  var t = [],
                    r = [];
                  return (
                    e.forEach(function(e) {
                      e.schema === n ? t.push(e) : r.push(e);
                    }),
                    [t, r]
                  );
                })(void 0 === o ? [] : o, n),
                2
              ),
              a = i[0],
              c = i[1];
            A(a) && t.push(vr(e, a)), A(c) && r.push(vr(e, c));
          }),
          { matchedDecisions: t, unmatchedDecisions: r }
        );
      },
      hr = function(e) {
        var n = mr(e, rt),
          t = mr(n.unmatchedDecisions, tt),
          r = (function(e, n) {
            var t = [],
              r = {};
            return (
              A(e) &&
                e.forEach(function(e) {
                  e.scope === n
                    ? t.push(e)
                    : (r[e.scope] || (r[e.scope] = []), r[e.scope].push(e));
                }),
              { pageWideScopeDecisions: t, nonPageWideScopeDecisions: r }
            );
          })(t.matchedDecisions, nt),
          o = r.pageWideScopeDecisions,
          i = r.nonPageWideScopeDecisions;
        return {
          redirectDecisions: n.matchedDecisions,
          pageWideScopeDecisions: o,
          viewDecisions: i,
          nonAutoRenderableDecisions: t.unmatchedDecisions
        };
      },
      yr = function() {
        var e = {};
        return {
          storeClickMetrics: function(n) {
            e[n.selector] || (e[n.selector] = {}),
              (e[n.selector][n.meta.id] = {
                scope: n.meta.scope,
                scopeDetails: n.meta.scopeDetails
              });
          },
          getClickSelectors: function() {
            return Object.keys(e);
          },
          getClickMetasBySelector: function(n) {
            return e[n]
              ? (function(e) {
                  return Object.keys(e).map(function(n) {
                    return {
                      id: n,
                      scope: e[n].scope,
                      scopeDetails: e[n].scopeDetails
                    };
                  });
                })(e[n])
              : {};
          }
        };
      },
      wr = function(e) {
        var n = e.viewCache;
        return function(e) {
          var t = e.viewName,
            r = e.redirectDecisions,
            o = e.pageWideScopeDecisions,
            i = e.nonAutoRenderableDecisions,
            a = [].concat(Io(r), Io(o), Io(i));
          return Promise.resolve(a)
            .then(function(e) {
              return (function(e) {
                var n = e.viewCache,
                  t = e.viewName,
                  r = e.propositions;
                return t
                  ? n.getView(t).then(function(e) {
                      return [].concat(Io(e), Io(r));
                    })
                  : r;
              })({ viewCache: n, viewName: t, propositions: e });
            })
            .then(function(e) {
              return (function(e) {
                var n = e.propositions;
                return {
                  decisions: n,
                  propositions: pr({ decisions: n, renderAttempted: !1 })
                };
              })({ propositions: e });
            });
        };
      },
      br = function(e) {
        var n,
          t,
          r = e.config,
          o = e.logger,
          i = e.eventManager,
          a = (function(e) {
            var n = e.eventManager,
              t = e.mergeDecisionsMeta;
            return function(e) {
              var r = e.decisionsMeta,
                o = e.documentMayUnload,
                i = void 0 !== o && o,
                a = n.createEvent();
              return (
                a.mergeXdm({ eventType: "display" }),
                t(a, r),
                i && a.documentMayUnload(),
                n.sendEvent(a)
              );
            };
          })({ eventManager: i, mergeDecisionsMeta: lr }),
          c = (function(e) {
            var n = e.eventManager,
              t = e.mergeDecisionsMeta;
            return function(e) {
              var r = e.decisionsMeta,
                o = e.xdm,
                i = { eventType: "display" },
                a = n.createEvent();
              if (A(r)) {
                var c = r[0].scope;
                (i.web = { webPageDetails: { viewName: c } }), t(a, r);
              }
              return a.mergeXdm(i), a.mergeXdm(o), n.sendEvent(a);
            };
          })({ eventManager: i, mergeDecisionsMeta: lr }),
          u = yr(),
          s = u.getClickMetasBySelector,
          d = u.getClickSelectors,
          l = u.storeClickMetrics,
          g =
            ((t = C()),
            {
              storeViews: function(e) {
                e.then(function(e) {
                  void 0 === n && (n = {}), f(n, e), t.resolve();
                }).catch(function() {
                  void 0 === n && (n = {}), t.resolve();
                });
              },
              getView: function(e) {
                return t.promise.then(function() {
                  return n[e] || [];
                });
              },
              isInitialized: function() {
                return !(void 0 === n);
              }
            }),
          p = tr(l),
          v = cr({ modules: p, logger: o, executeActions: ir, collect: a }),
          m = cr({ modules: p, logger: o, executeActions: ir, collect: c }),
          h = (function(e) {
            var n = e.collect,
              t = e.window,
              r = e.logger,
              o = e.showContainers;
            return function(e) {
              var i = (function(e) {
                  var n = e[0],
                    t = n.items,
                    r = n.id,
                    o = n.scope,
                    i = n.scopeDetails;
                  return {
                    content: t[0].data.content,
                    decisions: [{ id: r, scope: o, scopeDetails: i }]
                  };
                })(e),
                a = i.content,
                c = i.decisions;
              return n({ decisionsMeta: c, documentMayUnload: !0 })
                .then(function() {
                  t.location.replace(a);
                })
                .catch(function() {
                  o(),
                    r.warn(
                      "An error occurred while executing the redirect offer."
                    );
                });
            };
          })({ collect: a, window: window, logger: o, showContainers: St }),
          y = (function(e) {
            var n = e.executeViewDecisions,
              t = e.collect;
            return function(e) {
              var r = e.viewName,
                o = e.viewDecisions;
              A(o)
                ? n(o)
                : t({
                    decisionsMeta: [],
                    xdm: { web: { webPageDetails: { viewName: r } } }
                  });
            };
          })({ viewCache: g, executeViewDecisions: m, collect: c }),
          w = (function(e) {
            var n = e.config,
              t = e.responseHandler,
              r = e.showContainers,
              o = e.hideContainers,
              i = e.mergeQuery;
            return function(e) {
              var a = e.decisionsDeferred,
                c = e.personalizationDetails,
                u = e.event,
                s = e.onResponse,
                f = e.onRequestFailure,
                d = n.prehidingStyle;
              c.isRenderDecisions() && o(d),
                i(u, c.createQueryDetails()),
                s(function(e) {
                  var n = e.response;
                  return t({
                    decisionsDeferred: a,
                    personalizationDetails: c,
                    response: n
                  });
                }),
                f(function() {
                  a.reject(), r();
                });
            };
          })({
            config: r,
            responseHandler: (function(e) {
              var n = e.autoRenderingHandler,
                t = e.nonRenderingHandler,
                r = e.groupDecisions,
                o = e.handleRedirectDecisions,
                i = e.showContainers;
              return function(e) {
                var a = e.decisionsDeferred,
                  c = e.personalizationDetails,
                  u = e.response.getPayloadsByType("personalization:decisions"),
                  s = c.getViewName();
                if (0 === u.length)
                  return (
                    i(), a.resolve({}), { decisions: [], propositions: [] }
                  );
                var f = r(u),
                  d = f.redirectDecisions,
                  l = f.pageWideScopeDecisions,
                  g = f.viewDecisions,
                  p = f.nonAutoRenderableDecisions;
                return c.isRenderDecisions() && A(d)
                  ? (a.resolve({}), o(d))
                  : (a.resolve(g),
                    c.isRenderDecisions()
                      ? n({
                          viewName: s,
                          pageWideScopeDecisions: l,
                          nonAutoRenderableDecisions: p
                        })
                      : t({
                          viewName: s,
                          redirectDecisions: d,
                          pageWideScopeDecisions: l,
                          nonAutoRenderableDecisions: p
                        }));
              };
            })({
              autoRenderingHandler: (function(e) {
                var n = e.viewCache,
                  t = e.executeDecisions,
                  r = e.executeCachedViewDecisions,
                  o = e.showContainers;
                return function(e) {
                  var i = e.viewName,
                    a = e.pageWideScopeDecisions,
                    c = e.nonAutoRenderableDecisions;
                  return i
                    ? n.getView(i).then(function(e) {
                        return (
                          t(a),
                          r({ viewName: i, viewDecisions: e }),
                          o(),
                          {
                            decisions: Io(c),
                            propositions: [].concat(
                              Io(
                                pr({
                                  decisions: [].concat(Io(a), Io(e)),
                                  renderAttempted: !0
                                })
                              ),
                              Io(pr({ decisions: c, renderAttempted: !1 }))
                            )
                          }
                        );
                      })
                    : (t(a),
                      o(),
                      {
                        decisions: Io(c),
                        propositions: [].concat(
                          Io(pr({ decisions: a, renderAttempted: !0 })),
                          Io(pr({ decisions: c, renderAttempted: !1 }))
                        )
                      });
                };
              })({
                viewCache: g,
                executeDecisions: v,
                executeCachedViewDecisions: y,
                showContainers: St
              }),
              nonRenderingHandler: wr({ viewCache: g }),
              groupDecisions: hr,
              handleRedirectDecisions: h,
              showContainers: St
            }),
            showContainers: St,
            hideContainers: kt,
            mergeQuery: gr
          }),
          b = (function(e) {
            var n = e.mergeDecisionsMeta,
              t = e.collectClicks,
              r = e.getClickSelectors,
              o = e.getClickMetasBySelector;
            return function(e) {
              var i = e.event,
                a = e.clickedElement,
                c = r();
              if (A(c)) {
                var u = t(a, c, o);
                A(u) && (i.mergeXdm({ eventType: "click" }), n(i, u));
              }
            };
          })({
            mergeDecisionsMeta: lr,
            collectClicks: fr,
            getClickSelectors: d,
            getClickMetasBySelector: s
          }),
          E = (function(e) {
            var n = e.executeCachedViewDecisions,
              t = e.viewCache,
              r = e.showContainers;
            return function(e) {
              var o = e.personalizationDetails,
                i = e.onResponse,
                a = e.onRequestFailure,
                c = o.getViewName();
              return t.getView(c).then(function(e) {
                o.isRenderDecisions() && n({ viewName: c, viewDecisions: e }),
                  i(function() {
                    return o.isRenderDecisions()
                      ? {
                          propositions: pr({
                            decisions: e,
                            renderAttempted: !0
                          })
                        }
                      : {
                          decisions: e,
                          propositions: pr({
                            decisions: e,
                            renderAttempted: !1
                          })
                        };
                  }),
                  a(function() {
                    r();
                  });
              });
            };
          })({
            executeCachedViewDecisions: y,
            viewCache: g,
            showContainers: St
          });
        return ot({
          logger: o,
          fetchDataHandler: w,
          viewChangeHandler: E,
          onClickHandler: b,
          isAuthoringModeEnabled: dr,
          mergeQuery: gr,
          viewCache: g
        });
      };
    (br.namespace = "Personalization"),
      (br.configValidators = { prehidingStyle: rn().nonEmpty() });
    var Cr,
      Er = "2.6.4",
      Ir = (function(e) {
        return function(n) {
          var t = {
            webPageDetails: { URL: e.location.href || e.location },
            webReferrer: { URL: e.document.referrer }
          };
          h(n, { web: t });
        };
      })(window),
      Rr = (function(e) {
        return function(n) {
          var t = e.screen,
            r = t.width,
            o = { screenHeight: t.height, screenWidth: r },
            i =
              (function(e) {
                var n = e.screen.orientation;
                if (null == n || null == n.type) return null;
                var t = n.type.split("-");
                return 0 === t.length ||
                  ("portrait" !== t[0] && "landscape" !== t[0])
                  ? null
                  : t[0];
              })(e) ||
              (function(e) {
                return e.matchMedia("(orientation: portrait)").matches
                  ? "portrait"
                  : e.matchMedia("(orientation: landscape)").matches
                  ? "landscape"
                  : null;
              })(e);
          i && (o.screenOrientation = i), h(n, { device: o });
        };
      })(window),
      Dr = (function(e) {
        return function(n) {
          var t = e.document.documentElement,
            r = (t = void 0 === t ? {} : t).clientWidth,
            o = t.clientHeight,
            i = { type: "browser" };
          ie(r) &&
            r >= 0 &&
            ie(o) &&
            o >= 0 &&
            (i.browserDetails = {
              viewportWidth: Math.round(r),
              viewportHeight: Math.round(o)
            }),
            h(n, { environment: i });
        };
      })(window),
      kr =
        ((Cr = function() {
          return new Date();
        }),
        function(e) {
          var n = Cr(),
            t = {
              localTime: we(n),
              localTimezoneOffset: n.getTimezoneOffset()
            };
          h(e, { placeContext: t });
        }),
      Sr = (function(e) {
        return function(n) {
          var t = e().toISOString();
          h(n, { timestamp: t });
        };
      })(function() {
        return new Date();
      }),
      Or = { web: Ir, device: Rr, environment: Dr, placeContext: kr },
      xr = [
        Sr,
        function(e) {
          h(e, {
            implementationDetails: {
              name: "https://ns.adobe.com/experience/alloy",
              version: Er,
              environment: "browser"
            }
          });
        }
      ],
      qr = function(e) {
        return (function(e, n, t, r) {
          var o = e.context,
            i = $(o, function(e, r) {
              return t[e]
                ? [t[e]]
                : (n.warn(
                    "Invalid context[" + r + "]: '" + e + "' is not available."
                  ),
                  []);
            }).concat(r);
          return {
            namespace: "Context",
            lifecycle: {
              onBeforeEvent: function(e) {
                var n = e.event,
                  t = {};
                i.forEach(function(e) {
                  return e(t);
                }),
                  n.mergeXdm(t);
              }
            }
          };
        })(e.config, e.logger, Or, xr);
      };
    (qr.namespace = "Context"),
      (qr.configValidators = { context: Ke(rn()).default(Object.keys(Or)) });
    var Pr = function e(n) {
        return Array.isArray(n)
          ? n.map(function(n) {
              return e(n);
            })
          : "object" === wo(n) && null !== n
          ? Object.keys(n)
              .sort()
              .reduce(function(t, r) {
                return (t[r] = e(n[r])), t;
              }, {})
          : n;
      },
      Ar = function(e) {
        return b(JSON.stringify(Pr(e)));
      },
      jr = function(e) {
        return e.standard + "." + e.version;
      },
      Mr = function() {
        var e = {},
          n = Xn({
            content: e,
            addIdentity: function(n, t) {
              (e.identityMap = e.identityMap || {}),
                (e.identityMap[n] = e.identityMap[n] || []),
                e.identityMap[n].push(t);
            }
          });
        return (
          (n.setConsent = function(n) {
            e.consent = n;
          }),
          n
        );
      },
      Nr = function(e) {
        return Jn({
          payload: e,
          getAction: function() {
            return "privacy/set-consent";
          },
          getUseSendBeacon: function() {
            return !1;
          }
        });
      },
      Tr = function(e) {
        return e.split(";").reduce(function(e, n) {
          var t = Eo(n.split("="), 2),
            r = t[0],
            o = t[1];
          return (e[r] = o), e;
        }, {});
      },
      Ur = tn({
        consent: Ke(Ge())
          .required()
          .nonEmpty(),
        identityMap: an
      })
        .noUnknownFields()
        .required(),
      Br = function(e) {
        var n,
          t,
          r = e.config,
          o = e.consent,
          i = e.sendEdgeNetworkRequest,
          a = e.createNamespacedStorage,
          c = r.orgId,
          u = r.defaultConsent,
          s = (function(e) {
            var n = e.parseConsentCookie,
              t = e.orgId,
              r = e.cookieJar,
              o = ee(t, "consent");
            return {
              read: function() {
                var e = r.get(o);
                return e ? n(e) : {};
              },
              clear: function() {
                r.remove(o);
              }
            };
          })({ parseConsentCookie: Tr, orgId: c, cookieJar: g }),
          f =
            ((n = 0),
            (t = Promise.resolve()),
            {
              addTask: function(e) {
                n += 1;
                var r = function() {
                  return e().finally(function() {
                    n -= 1;
                  });
                };
                return (t = t.then(r, r));
              },
              get length() {
                return n;
              }
            }),
          d = (function(e) {
            var n = e.createConsentRequestPayload,
              t = e.createConsentRequest,
              r = e.sendEdgeNetworkRequest;
            return function(e) {
              var o = e.consentOptions,
                i = e.identityMap,
                a = n();
              a.setConsent(o),
                v(i) &&
                  Object.keys(i).forEach(function(e) {
                    i[e].forEach(function(n) {
                      a.addIdentity(e, n);
                    });
                  });
              var c = t(a);
              return r({ request: c }).then(function() {});
            };
          })({
            createConsentRequestPayload: Mr,
            createConsentRequest: Nr,
            sendEdgeNetworkRequest: i
          }),
          l = (function(e) {
            var n = e.storage;
            return {
              clear: function() {
                n.clear();
              },
              lookup: function(e) {
                var t = {},
                  r = function(e) {
                    var n = jr(e);
                    e.standard, e.version;
                    var r = Co(e, ["standard", "version"]);
                    return t[n] || (t[n] = Ar(r).toString()), t[n];
                  };
                return {
                  isNew: function() {
                    return e.some(function(e) {
                      var t = jr(e),
                        o = n.getItem(t);
                      return null === o || o !== r(e);
                    });
                  },
                  save: function() {
                    e.forEach(function(e) {
                      var t = jr(e);
                      n.setItem(t, r(e));
                    });
                  }
                };
              }
            };
          })({ storage: a(Z(c) + ".consentHashes.").persistent }),
          p = ne({ orgId: c });
        return (function(e) {
          var n = e.storedConsent,
            t = e.taskQueue,
            r = e.defaultConsent,
            o = e.consent,
            i = e.sendSetConsentRequest,
            a = e.validateSetConsentOptions,
            c = e.consentHashStore,
            u = e.doesIdentityCookieExist,
            s = bo({}, pn, r),
            f = n.read(),
            d = u(),
            l = void 0 !== f.general;
          (d && l) || c.clear(),
            d || (n.clear(), (f = {})),
            o.initializeConsent(s, f);
          var g = function() {
            if (0 === t.length) {
              var e = n.read();
              void 0 !== e.general && o.setConsent(e);
            }
          };
          return {
            commands: {
              setConsent: {
                optionsValidator: a,
                run: function(e) {
                  var n = e.consent,
                    r = e.identityMap;
                  o.suspend();
                  var a = c.lookup(n);
                  return t
                    .addTask(function() {
                      return a.isNew()
                        ? i({ consentOptions: n, identityMap: r })
                        : Promise.resolve();
                    })
                    .then(function() {
                      return a.save();
                    })
                    .finally(g);
                }
              }
            },
            lifecycle: { onResponse: g, onRequestFailure: g }
          };
        })({
          storedConsent: s,
          taskQueue: f,
          defaultConsent: u,
          consent: o,
          sendSetConsentRequest: d,
          validateSetConsentOptions: Ur,
          consentHashStore: l,
          doesIdentityCookieExist: p
        });
      };
    Br.namespace = "Privacy";
    var Fr = function() {
        return { eventMergeId: Re() };
      },
      _r = function() {
        return {
          commands: {
            createEventMergeId: {
              run: { createEventMergeId: Fr }.createEventMergeId
            }
          }
        };
      };
    (_r.namespace = "EventMerge"), (_r.configValidators = {});
    var Vr = function() {
      return {
        commands: {
          getLibraryInfo: {
            run: function() {
              return { libraryInfo: { version: Er } };
            }
          }
        }
      };
    };
    Vr.namespace = "LibraryInfo";
    var Hr,
      Lr,
      zr = [Dn, xn, Gn, Zn, br, qr, Br, _r, Vr],
      Jr = function(e) {
        var n = e.options,
          t = e.componentCreators,
          r = e.coreConfigValidators,
          o = e.createConfig,
          i = e.logger,
          a = e.setDebugEnabled,
          c = o(
            (function(e, n) {
              try {
                return tn(e)
                  .noUnknownFields()
                  .required()(n);
              } catch (e) {
                throw new Error(
                  "Resolve these configuration problems:\n\t - " +
                    e.message.split("\n").join("\n\t - ") +
                    "\nFor configuration documentation see: https://adobe.ly/2M4ErNE"
                );
              }
            })(
              (function(e, n) {
                var t = {};
                return (
                  f(t, e),
                  n.forEach(function(e) {
                    var n = e.configValidators;
                    f(t, n);
                  }),
                  t
                );
              })(r, t),
              n
            )
          );
        return (
          a(c.debugEnabled, { fromConfig: !0 }),
          i.logOnInstanceConfigured({ config: c }),
          c
        );
      },
      Wr = function(e) {
        return f({}, e);
      },
      Xr = function(e) {
        var n = e.errorPrefix,
          t = e.logger;
        return function(e, r) {
          var o = me(e);
          if (o.code === vn)
            return (
              t.warn("The " + r + " could not fully complete. " + o.message), {}
            );
          throw (he({ error: o, message: n + " " + o.message }), o);
        };
      },
      Qr = function(e) {
        var n = e.getDebugEnabled,
          t = e.console,
          r = e.getMonitors,
          o = e.context,
          i = "[" + o.instanceName + "]";
        o.componentName && (i += " [" + o.componentName + "]");
        var a = function(e, n) {
            var t = r();
            if (t.length > 0) {
              var i = f({}, o, n);
              t.forEach(function(n) {
                n[e] && n[e](i);
              });
            }
          },
          c = function(e) {
            for (
              var r = arguments.length, o = new Array(r > 1 ? r - 1 : 0), c = 1;
              c < r;
              c++
            )
              o[c - 1] = arguments[c];
            a("onBeforeLog", { level: e, arguments: o }),
              n() && t[e].apply(t, [i].concat(o));
          };
        return {
          get enabled() {
            return r().length > 0 || n();
          },
          logOnInstanceCreated: function(e) {
            a("onInstanceCreated", e), c("info", "Instance initialized.");
          },
          logOnInstanceConfigured: function(e) {
            a("onInstanceConfigured", e),
              c(
                "info",
                "Instance configured. Computed configuration:",
                e.config
              );
          },
          logOnBeforeCommand: function(e) {
            a("onBeforeCommand", e),
              c(
                "info",
                "Executing " + e.commandName + " command. Options:",
                e.options
              );
          },
          logOnCommandResolved: function(e) {
            a("onCommandResolved", e),
              c("info", e.commandName + " command resolved. Result:", e.result);
          },
          logOnCommandRejected: function(e) {
            a("onCommandRejected", e),
              c(
                "error",
                e.commandName + " command was rejected. Error:",
                e.error
              );
          },
          logOnBeforeNetworkRequest: function(e) {
            a("onBeforeNetworkRequest", e),
              c(
                "info",
                "Request " + e.requestId + ": Sending request.",
                e.payload
              );
          },
          logOnNetworkResponse: function(e) {
            a("onNetworkResponse", e);
            var n =
              e.parsedBody || e.body ? "response body:" : "no response body.";
            c(
              "info",
              "Request " +
                e.requestId +
                ": Received response with status code " +
                e.statusCode +
                " and " +
                n,
              e.parsedBody || e.body
            );
          },
          logOnNetworkError: function(e) {
            a("onNetworkError", e),
              c(
                "error",
                "Request " + e.requestId + ": Network request failed.",
                e.error
              );
          },
          info: c.bind(null, "info"),
          warn: c.bind(null, "warn"),
          error: c.bind(null, "error")
        };
      },
      $r =
        "Event was canceled because the onBeforeEventSend callback returned false.",
      Gr = function(e) {
        var n = e.cookieJar,
          t = e.orgId,
          r = e.apexDomain;
        return {
          cookiesToPayload: function(e, o) {
            var i,
              a = ((i = r), o.substr(-i.length) === i),
              c = { domain: r, cookiesEnabled: !0 };
            if (!a) {
              var u = n.get(),
                s = Object.keys(u)
                  .filter(function(e) {
                    return (function(e, n) {
                      return 0 === n.indexOf("kndctr_" + Z(e) + "_");
                    })(t, e);
                  })
                  .map(function(e) {
                    return { key: e, value: u[e] };
                  });
              s.length && (c.entries = s);
            }
            e.mergeState(c);
          },
          responseToCookies: function(e) {
            e.getPayloadsByType("state:store").forEach(function(e) {
              var t,
                o,
                i,
                a = { domain: r };
              void 0 !== e.maxAge &&
                (a.expires =
                  ((t = 1e3), (o = 864e5), (i = e.maxAge), (t * i) / o)),
                n.set(e.key, e.value, a);
            });
          }
        };
      },
      Kr = function() {
        var e = {},
          n = Xn({ content: e, addIdentity: Qn(e) });
        return (
          (n.addEvent = function(n) {
            (e.events = e.events || []), e.events.push(n);
          }),
          (n.getDocumentMayUnload = function() {
            return (e.events || []).some(function(e) {
              return e.getDocumentMayUnload();
            });
          }),
          n
        );
      },
      Yr = function(e) {
        var n = function(n) {
          var t = n.isIdentityEstablished;
          return e.getDocumentMayUnload() && t;
        };
        return Jn({
          payload: e,
          getAction: function(e) {
            var t = e.isIdentityEstablished;
            return n({ isIdentityEstablished: t }) ? "collect" : "interact";
          },
          getUseSendBeacon: n
        });
      },
      Zr = "The server responded with a",
      eo = [429, 503, 502, 504],
      no = function(e) {
        var n = e.response;
        return e.retriesAttempted < 3 && o(eo, n.statusCode);
      },
      to = function(e) {
        var n = e.response,
          t = e.retriesAttempted,
          r = (function(e) {
            var n,
              t = e.getHeader("Retry-After");
            if (t) {
              var r = parseInt(t, 10);
              n = ae(r)
                ? 1e3 * r
                : Math.max(0, new Date(t).getTime() - new Date().getTime());
            }
            return n;
          })(n);
        return (
          void 0 === r &&
            (r = (function(e) {
              var n = 1e3 + 1e3 * e,
                t = 0.3 * n,
                r = n - t,
                o = n + t;
              return Math.round(r + Math.random() * (o - r));
            })(t)),
          r
        );
      },
      ro =
        ((Hr = window),
        function(e) {
          var n = G + e;
          return {
            session: te(Hr, "sessionStorage", n),
            persistent: te(Hr, "localStorage", n)
          };
        }),
      oo = window,
      io = oo.console,
      ao = oo.fetch,
      co = oo.navigator,
      uo = oo.XMLHttpRequest,
      so = function() {
        return window.__alloyMonitors || [];
      },
      fo = {
        debugEnabled: Ye().default(!1),
        defaultConsent: on(ln, "out", gn).default(ln),
        edgeConfigId: rn()
          .unique()
          .required(),
        edgeDomain: rn()
          .domain()
          .default("edge.adobedc.net"),
        edgeBasePath: rn()
          .nonEmpty()
          .default("ee"),
        orgId: rn()
          .unique()
          .required(),
        onBeforeEventSend: Ze().default(se)
      },
      lo = Y(window, g),
      go = P(ao)
        ? (function(e) {
            var n = e.fetch;
            return function(e, t) {
              return n(e, {
                method: "POST",
                cache: "no-cache",
                credentials: "include",
                headers: { "Content-Type": "text/plain; charset=UTF-8" },
                referrer: "client",
                body: t
              }).then(function(e) {
                return e.text().then(function(n) {
                  return {
                    statusCode: e.status,
                    getHeader: function(n) {
                      return e.headers.get(n);
                    },
                    body: n
                  };
                });
              });
            };
          })({ fetch: ao })
        : (function(e) {
            var n = e.XMLHttpRequest;
            return function(e, t) {
              return new Promise(function(r, o) {
                var i = new n();
                (i.onreadystatechange = function() {
                  4 === i.readyState &&
                    (0 === i.status
                      ? o(new Error("Request aborted."))
                      : r({
                          statusCode: i.status,
                          getHeader: function(e) {
                            return i.getResponseHeader(e);
                          },
                          body: i.responseText
                        }));
                }),
                  (i.onloadstart = function() {
                    i.responseType = "text";
                  }),
                  i.open("POST", e, !0),
                  i.setRequestHeader(
                    "Content-Type",
                    "text/plain; charset=UTF-8"
                  ),
                  (i.withCredentials = !0),
                  (i.onerror = o),
                  (i.onabort = o),
                  i.send(t);
              });
            };
          })({ XMLHttpRequest: uo }),
      po = function(e) {
        var n = e.instanceName,
          t = e.logController,
          r = t.setDebugEnabled,
          o = t.logger,
          i = t.createComponentLogger,
          a = dn(),
          c = sn(a),
          u = Xr({ errorPrefix: "[" + n + "]", logger: o });
        return In({
          logger: o,
          configureCommand: function(e) {
            var t = Jr({
                options: e,
                componentCreators: zr,
                coreConfigValidators: fo,
                createConfig: Wr,
                logger: o,
                setDebugEnabled: r
              }),
              u = Gr({ cookieJar: g, orgId: t.orgId, apexDomain: lo }),
              s = P(co.sendBeacon)
                ? (function(e) {
                    var n = e.sendBeacon,
                      t = e.sendFetchRequest,
                      r = e.logger;
                    return function(e, o) {
                      var i = new Blob([o], {
                        type: "text/plain; charset=UTF-8"
                      });
                      return n(e, i)
                        ? Promise.resolve({
                            statusCode: 204,
                            getHeader: function() {
                              return null;
                            },
                            body: ""
                          })
                        : (r.info(
                            "Unable to use `sendBeacon`; falling back to `fetch`."
                          ),
                          t(e, o));
                    };
                  })({
                    sendBeacon: co.sendBeacon.bind(co),
                    sendFetchRequest: go,
                    logger: o
                  })
                : go,
              d = (function(e) {
                var n = e.logger,
                  t = e.sendFetchRequest,
                  r = e.sendBeaconRequest,
                  o = e.isRequestRetryable,
                  i = e.getRequestRetryDelay;
                return function(e) {
                  var a = e.requestId,
                    c = e.url,
                    u = e.payload,
                    s = e.useSendBeacon,
                    f = JSON.stringify(u),
                    d = JSON.parse(f);
                  return (
                    n.logOnBeforeNetworkRequest({
                      url: c,
                      requestId: a,
                      payload: d
                    }),
                    (function e() {
                      var u =
                        arguments.length > 0 && void 0 !== arguments[0]
                          ? arguments[0]
                          : 0;
                      return (s ? r : t)(c, f).then(function(t) {
                        var r;
                        if (o({ response: t, retriesAttempted: u })) {
                          var s = i({ response: t, retriesAttempted: u });
                          return new Promise(function(n) {
                            setTimeout(function() {
                              n(e(u + 1));
                            }, s);
                          });
                        }
                        try {
                          r = JSON.parse(t.body);
                        } catch (e) {}
                        return (
                          n.logOnNetworkResponse(
                            yo(
                              yo({ requestId: a, url: c, payload: d }, t),
                              {},
                              { parsedBody: r, retriesAttempted: u }
                            )
                          ),
                          {
                            statusCode: t.statusCode,
                            body: t.body,
                            parsedBody: r,
                            getHeader: t.getHeader
                          }
                        );
                      });
                    })().catch(function(e) {
                      throw (n.logOnNetworkError({
                        requestId: a,
                        url: c,
                        payload: d,
                        error: e
                      }),
                      ye({ error: e, message: "Network request failed." }));
                    })
                  );
                };
              })({
                logger: o,
                sendFetchRequest: go,
                sendBeaconRequest: s,
                isRequestRetryable: no,
                getRequestRetryDelay: to
              }),
              l = (function(e) {
                var n = e.logger;
                return function(e) {
                  var t = e.statusCode,
                    r = e.body,
                    o = e.parsedBody;
                  if (
                    t < 200 ||
                    t >= 300 ||
                    (!o && 204 !== t) ||
                    (o && !Array.isArray(o.handle))
                  ) {
                    var i = o ? JSON.stringify(o, null, 2) : r;
                    throw new Error(
                      Zr +
                        " status code " +
                        t +
                        " and " +
                        (i ? "response body:\n" + i : "no response body.")
                    );
                  }
                  if (o) {
                    var a = o.warnings,
                      c = void 0 === a ? [] : a,
                      u = o.errors,
                      s = void 0 === u ? [] : u;
                    c.forEach(function(e) {
                      n.warn(Zr + " warning:", e);
                    }),
                      s.forEach(function(e) {
                        n.error(Zr + " non-fatal error:", e);
                      });
                  }
                };
              })({ logger: o }),
              p = (function(e) {
                var n = e.extractEdgeInfo;
                return function(e) {
                  var t = e.content,
                    r = void 0 === t ? {} : t,
                    o = e.getHeader,
                    i = r.handle,
                    a = void 0 === i ? [] : i,
                    c = r.errors,
                    u = void 0 === c ? [] : c,
                    s = r.warnings,
                    f = void 0 === s ? [] : s;
                  return {
                    getPayloadsByType: function(e) {
                      return $(
                        a.filter(function(n) {
                          return n.type === e;
                        }),
                        function(e) {
                          return e.payload;
                        }
                      );
                    },
                    getErrors: function() {
                      return u;
                    },
                    getWarnings: function() {
                      return f;
                    },
                    getEdge: function() {
                      return n(o("x-adobe-edge"));
                    },
                    toJSON: function() {
                      return r;
                    }
                  };
                };
              })({
                extractEdgeInfo: (function(e) {
                  var n = e.logger;
                  return function(e) {
                    if (e) {
                      var t = e.split(";");
                      if (t.length >= 2 && t[1].length > 0)
                        try {
                          var r = parseInt(t[1], 10);
                          if (!isNaN(r)) return { regionId: r };
                        } catch (e) {}
                      n.warn('Invalid adobe edge: "' + e + '"');
                    }
                    return {};
                  };
                })({ logger: o })
              }),
              v = (function(e) {
                var n = e.config,
                  t = e.lifecycle,
                  r = e.cookieTransfer,
                  o = e.sendNetworkRequest,
                  i = e.createResponse,
                  a = e.processWarningsAndErrors,
                  c = n.edgeDomain,
                  u = n.edgeBasePath,
                  s = n.edgeConfigId;
                return function(e) {
                  var n = e.request,
                    d = e.runOnResponseCallbacks,
                    l = void 0 === d ? se : d,
                    g = e.runOnRequestFailureCallbacks,
                    p = void 0 === g ? se : g,
                    v = w();
                  v.add(t.onResponse), v.add(l);
                  var m = w();
                  return (
                    m.add(t.onRequestFailure),
                    m.add(p),
                    t
                      .onBeforeRequest({
                        request: n,
                        onResponse: v.add,
                        onRequestFailure: m.add
                      })
                      .then(function() {
                        var e = n.getUseIdThirdPartyDomain()
                            ? "adobedc.demdex.net"
                            : c,
                          t =
                            "https://" +
                            e +
                            "/" +
                            u +
                            "/v1/" +
                            n.getAction() +
                            "?configId=" +
                            s +
                            "&requestId=" +
                            n.getId();
                        return (
                          r.cookiesToPayload(n.getPayload(), e),
                          o({
                            requestId: n.getId(),
                            url: t,
                            payload: n.getPayload(),
                            useSendBeacon: n.getUseSendBeacon()
                          })
                        );
                      })
                      .then(function(e) {
                        return a(e), e;
                      })
                      .catch(function(e) {
                        var n = function() {
                          throw e;
                        };
                        return m.call({ error: e }).then(n, n);
                      })
                      .then(function(e) {
                        var n = e.parsedBody,
                          t = e.getHeader,
                          o = i({ content: n, getHeader: t });
                        return (
                          r.responseToCookies(o),
                          v.call({ response: o }).then(function(e) {
                            var n = e.shift() || [],
                              t = e.shift() || [],
                              r = e;
                            return f.apply(
                              void 0,
                              [{}].concat(Io(n), Io(t), Io(r))
                            );
                          })
                        );
                      })
                  );
                };
              })({
                config: t,
                lifecycle: c,
                cookieTransfer: u,
                sendNetworkRequest: d,
                createResponse: p,
                processWarningsAndErrors: l
              }),
              m = (function(e) {
                var n = e.generalConsentState,
                  t = e.logger,
                  r = function(e, r) {
                    switch (e.general) {
                      case ln:
                        n.in(r);
                        break;
                      case "out":
                        n.out(r);
                        break;
                      case gn:
                        n.pending(r);
                        break;
                      default:
                        t.warn("Unknown consent value: " + e.general);
                    }
                  };
                return {
                  initializeConsent: function(e, n) {
                    n.general ? r(n, hn) : r(e, mn);
                  },
                  setConsent: function(e) {
                    r(e, yn);
                  },
                  suspend: function() {
                    n.pending();
                  },
                  awaitConsent: function() {
                    return n.awaitConsent();
                  }
                };
              })({ generalConsentState: bn({ logger: o }), logger: o }),
              h = (function(e) {
                var n = e.config,
                  t = e.logger,
                  r = e.lifecycle,
                  o = e.consent,
                  i = e.createEvent,
                  a = e.createDataCollectionRequestPayload,
                  c = e.createDataCollectionRequest,
                  u = e.sendEdgeNetworkRequest,
                  s = n.onBeforeEventSend;
                return {
                  createEvent: i,
                  sendEvent: function(e) {
                    var n =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : {},
                      i = n.renderDecisions,
                      f = void 0 !== i && i,
                      d = n.decisionScopes,
                      l = a(),
                      g = c(l),
                      p = w(),
                      v = w();
                    return r
                      .onBeforeEvent({
                        event: e,
                        renderDecisions: f,
                        decisionScopes: d,
                        onResponse: p.add,
                        onRequestFailure: v.add
                      })
                      .then(function() {
                        return l.addEvent(e), o.awaitConsent();
                      })
                      .then(function() {
                        try {
                          e.finalize(s);
                        } catch (o) {
                          var n = function() {
                            throw o;
                          };
                          return (
                            v.add(r.onRequestFailure),
                            v.call({ error: o }).then(n, n)
                          );
                        }
                        if (!e.shouldSend()) {
                          v.add(r.onRequestFailure), t.info($r);
                          var o = new Error($r);
                          return v.call({ error: o }).then(function() {});
                        }
                        return u({
                          request: g,
                          runOnResponseCallbacks: p.call,
                          runOnRequestFailureCallbacks: v.call
                        });
                      });
                  }
                };
              })({
                config: t,
                logger: o,
                lifecycle: c,
                consent: m,
                createEvent: Cn,
                createDataCollectionRequestPayload: Kr,
                createDataCollectionRequest: Yr,
                sendEdgeNetworkRequest: v
              });
            return (function(e) {
              var n = e.componentCreators,
                t = e.lifecycle,
                r = e.componentRegistry,
                o = e.getImmediatelyAvailableTools;
              return (
                n.forEach(function(e) {
                  var n,
                    t = e.namespace,
                    i = o(t);
                  try {
                    n = e(i);
                  } catch (e) {
                    throw ye({
                      error: e,
                      message:
                        "[" +
                        t +
                        "] An error occurred during component creation."
                    });
                  }
                  r.register(t, n);
                }),
                t.onComponentsRegistered({ lifecycle: t }).then(function() {
                  return r;
                })
              );
            })({
              componentCreators: zr,
              lifecycle: c,
              componentRegistry: a,
              getImmediatelyAvailableTools: function(e) {
                var r = i(e);
                return {
                  config: t,
                  consent: m,
                  eventManager: h,
                  logger: r,
                  lifecycle: c,
                  sendEdgeNetworkRequest: v,
                  handleError: Xr({
                    errorPrefix: "[" + n + "] [" + e + "]",
                    logger: r
                  }),
                  createNamespacedStorage: ro
                };
              }
            });
          },
          setDebugCommand: function(e) {
            r(e.enabled, { fromConfig: !1 });
          },
          handleError: u,
          validateCommandOptions: Rn
        });
      };
    (Lr = window.__alloyNS) &&
      Lr.forEach(function(e) {
        var n = cn({
            console: io,
            locationSearch: window.location.search,
            createLogger: Qr,
            instanceName: e,
            createNamespacedStorage: ro,
            getMonitors: so
          }),
          t = (function(e) {
            return function(n) {
              var t = n[0],
                r = n[1],
                o = n[2],
                i = o[0],
                a = o[1];
              e(i, a).then(t, r);
            };
          })(po({ instanceName: e, logController: n })),
          r = window[e].q;
        (r.push = t),
          n.logger.logOnInstanceCreated({ instance: t }),
          r.forEach(t);
      });
  }
  function vo(e) {
    if (null == e)
      throw new TypeError(
        "Object.assign cannot be called with null or undefined"
      );
    return Object(e);
  }
  function mo(e, n) {
    return e((n = { exports: {} }), n.exports), n.exports;
  }
  function ho(e, n) {
    var t = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
      var r = Object.getOwnPropertySymbols(e);
      n &&
        (r = r.filter(function(n) {
          return Object.getOwnPropertyDescriptor(e, n).enumerable;
        })),
        t.push.apply(t, r);
    }
    return t;
  }
  function yo(e) {
    for (var n = 1; n < arguments.length; n++) {
      var t = null != arguments[n] ? arguments[n] : {};
      n % 2
        ? ho(Object(t), !0).forEach(function(n) {
            bo(e, n, t[n]);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t))
        : ho(Object(t)).forEach(function(n) {
            Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n));
          });
    }
    return e;
  }
  function wo(e) {
    return (wo =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function(e) {
            return typeof e;
          }
        : function(e) {
            return e &&
              "function" == typeof Symbol &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? "symbol"
              : typeof e;
          })(e);
  }
  function bo(e, n, t) {
    return (
      n in e
        ? Object.defineProperty(e, n, {
            value: t,
            enumerable: !0,
            configurable: !0,
            writable: !0
          })
        : (e[n] = t),
      e
    );
  }
  function Co(e, n) {
    if (null == e) return {};
    var t,
      r,
      o = (function(e, n) {
        if (null == e) return {};
        var t,
          r,
          o = {},
          i = Object.keys(e);
        for (r = 0; r < i.length; r++)
          (t = i[r]), n.indexOf(t) >= 0 || (o[t] = e[t]);
        return o;
      })(e, n);
    if (Object.getOwnPropertySymbols) {
      var i = Object.getOwnPropertySymbols(e);
      for (r = 0; r < i.length; r++)
        (t = i[r]),
          n.indexOf(t) >= 0 ||
            (Object.prototype.propertyIsEnumerable.call(e, t) && (o[t] = e[t]));
    }
    return o;
  }
  function Eo(e, n) {
    return (
      (function(e) {
        if (Array.isArray(e)) return e;
      })(e) ||
      (function(e, n) {
        var t =
          e &&
          (("undefined" != typeof Symbol && e[Symbol.iterator]) ||
            e["@@iterator"]);
        if (null == t) return;
        var r,
          o,
          i = [],
          a = !0,
          c = !1;
        try {
          for (
            t = t.call(e);
            !(a = (r = t.next()).done) &&
            (i.push(r.value), !n || i.length !== n);
            a = !0
          );
        } catch (e) {
          (c = !0), (o = e);
        } finally {
          try {
            a || null == t.return || t.return();
          } finally {
            if (c) throw o;
          }
        }
        return i;
      })(e, n) ||
      Ro(e, n) ||
      (function() {
        throw new TypeError(
          "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
        );
      })()
    );
  }
  function Io(e) {
    return (
      (function(e) {
        if (Array.isArray(e)) return Do(e);
      })(e) ||
      (function(e) {
        if (
          ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
          null != e["@@iterator"]
        )
          return Array.from(e);
      })(e) ||
      Ro(e) ||
      (function() {
        throw new TypeError(
          "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
        );
      })()
    );
  }
  function Ro(e, n) {
    if (e) {
      if ("string" == typeof e) return Do(e, n);
      var t = Object.prototype.toString.call(e).slice(8, -1);
      return (
        "Object" === t && e.constructor && (t = e.constructor.name),
        "Map" === t || "Set" === t
          ? Array.from(e)
          : "Arguments" === t ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)
          ? Do(e, n)
          : void 0
      );
    }
  }
  function Do(e, n) {
    (null == n || n > e.length) && (n = e.length);
    for (var t = 0, r = new Array(n); t < n; t++) r[t] = e[t];
    return r;
  }
  function ko(e, n) {
    return Object.prototype.hasOwnProperty.call(e, n);
  }
  function So(e) {
    return Boolean(e && void 0 !== e.length);
  }
  function Oo() {}
  function xo(e) {
    if (!(this instanceof xo))
      throw new TypeError("Promises must be constructed via new");
    if ("function" != typeof e) throw new TypeError("not a function");
    (this._state = 0),
      (this._handled = !1),
      (this._value = void 0),
      (this._deferreds = []),
      No(e, this);
  }
  function qo(e, n) {
    for (; 3 === e._state; ) e = e._value;
    0 !== e._state
      ? ((e._handled = !0),
        xo._immediateFn(function() {
          var t = 1 === e._state ? n.onFulfilled : n.onRejected;
          if (null !== t) {
            var r;
            try {
              r = t(e._value);
            } catch (e) {
              return void Ao(n.promise, e);
            }
            Po(n.promise, r);
          } else (1 === e._state ? Po : Ao)(n.promise, e._value);
        }))
      : e._deferreds.push(n);
  }
  function Po(e, n) {
    try {
      if (n === e)
        throw new TypeError("A promise cannot be resolved with itself.");
      if (n && ("object" === wo(n) || "function" == typeof n)) {
        var t = n.then;
        if (n instanceof xo) return (e._state = 3), (e._value = n), void jo(e);
        if ("function" == typeof t)
          return void No(
            (function(e, n) {
              return function() {
                e.apply(n, arguments);
              };
            })(t, n),
            e
          );
      }
      (e._state = 1), (e._value = n), jo(e);
    } catch (n) {
      Ao(e, n);
    }
  }
  function Ao(e, n) {
    (e._state = 2), (e._value = n), jo(e);
  }
  function jo(e) {
    2 === e._state &&
      0 === e._deferreds.length &&
      xo._immediateFn(function() {
        e._handled || xo._unhandledRejectionFn(e._value);
      });
    for (var n = 0, t = e._deferreds.length; n < t; n++) qo(e, e._deferreds[n]);
    e._deferreds = null;
  }
  function Mo(e, n, t) {
    (this.onFulfilled = "function" == typeof e ? e : null),
      (this.onRejected = "function" == typeof n ? n : null),
      (this.promise = t);
  }
  function No(e, n) {
    var t = !1;
    try {
      e(
        function(e) {
          t || ((t = !0), Po(n, e));
        },
        function(e) {
          t || ((t = !0), Ao(n, e));
        }
      );
    } catch (e) {
      if (t) return;
      (t = !0), Ao(n, e);
    }
  }
})();
